(this["webpackJsonpfa12-dapp-workshop"]=this["webpackJsonpfa12-dapp-workshop"]||[]).push([[0],{184:function(e,t){},304:function(e,t){},306:function(e,t){},317:function(e,t){},319:function(e,t){},346:function(e,t){},347:function(e,t){},352:function(e,t){},354:function(e,t){},361:function(e,t){},380:function(e,t){},476:function(e,t,c){},494:function(e,t,c){},495:function(e,t,c){},496:function(e,t,c){},497:function(e,t,c){},498:function(e,t,c){"use strict";c.r(t);var n=c(2),a=c(534),r=c(1),s=c(267),i=c.n(s),l=c(536),o=c(280),j=c(524),d=c(533),b=c(541),u=c(82),h=c(501),O=c(508),x=c(172),m=function(e){var t=Object(h.b)().toggleColorMode,c=Object(h.c)("dark","light"),a=Object(h.c)(x.a,x.b);return Object(n.jsx)(O.a,Object(u.a)({size:"md",fontSize:"lg",variant:"ghost",color:"current",marginLeft:"2",onClick:t,icon:Object(n.jsx)(a,{}),"aria-label":"Switch to ".concat(c," mode")},e))},f=c(8),v=c(525),p=c(531),g=c(282),k=c(532),w=c(0),N=c.n(w),y=c(33),_=(c(4),c(5),c(135)),C=c(92),B=c(74),S="https://hangzhounet.api.tez.ie/",I=new C.a(S),P=new _.a({name:"Plenty Bonds Marketplace: Falcon Heavy"});function T(){var e=Object(r.useState)(),t=Object(f.a)(e,2),c=t[0],n=t[1];return{connect:Object(r.useCallback)(Object(y.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.requestPermissions({scopes:[B.r.OPERATION_REQUEST,B.r.SIGN,B.r.THRESHOLD]});case 2:return e.next=4,P.getPKH();case 4:t=e.sent,n(t);case 6:case"end":return e.stop()}}),e)}))),[]),disconnect:Object(r.useCallback)(Object(y.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.client.removeAllAccounts();case 2:case"end":return e.stop()}}),e)}))),[]),pkh:c,Tezos:I}}I.setWalletProvider(P);var z=c(526),A=c(527),E=c(528),F=c(538),U=function(e){return Object(n.jsxs)(j.a,{w:"full",children:[Object(n.jsx)(v.a,{size:"sm",align:"left",marginBottom:"2",children:"Contract address:"}),Object(n.jsxs)(z.a,{children:[Object(n.jsx)(A.a,{children:Object(n.jsx)(F.a,{})}),Object(n.jsx)(E.a,Object(u.a)({},e))]})]})},L=c(530),R=function(e,t){var c=Object(r.useState)(),n=Object(f.a)(c,2),a=n[0],s=n[1],i=Object(r.useState)(),l=Object(f.a)(i,2),o=l[0],j=l[1],d=Object(r.useState)(),b=Object(f.a)(d,2),u=b[0],h=b[1];return Object(r.useEffect)((function(){var c=!1;return Object(y.a)(N.a.mark((function n(){var a;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s(!0),j(void 0),n.next=5,e();case 5:a=n.sent,!c&&h(t?t(a):a),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),!c&&j("Something went wrong while fetching storage: "+n.t0.toString());case 12:return n.prev=12,!c&&s(!1),n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[0,9,12,15]])})))(),function(){c=!0}}),[e,t]),{fetching:a,error:o,data:u}},H=c(540),M=function(e){return Object(n.jsx)(H.a,Object(u.a)({thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"blue.500",size:"xl",alignSelf:"center"},e))},V=function(e){var t=e.contractAddress,c=T().Tezos,a=Object(r.useCallback)(Object(y.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.contract.at(t);case 2:return e.abrupt("return",e.sent.storage());case 3:case"end":return e.stop()}}),e)}))),[c.contract,t]),s=R(a,JSON.stringify),i=s.fetching,l=s.data,o=s.error;return i||!l&&!o?Object(n.jsx)(M,{}):Object(n.jsxs)(j.a,{w:"full",children:[Object(n.jsx)(v.a,{size:"sm",align:"left",marginBottom:"2",children:"Contract storage:"}),Object(n.jsx)(L.a,{readOnly:!0,defaultValue:o||l,isInvalid:!!o})]})},K=c(26),W=function(e){return function(e){return 3===Object(K.g)(e)}(e)&&e.startsWith("KT1")},q=function(e){var t=e.contractAddress,c=e.pkh,a=T().Tezos,s=Object(r.useCallback)(Object(y.a)(N.a.mark((function e(){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.contract.at(t);case 2:return n=e.sent,e.abrupt("return",n.views.getBalance(c).read().catch((function(){return 0})));case 4:case"end":return e.stop()}}),e)}))),[t,c,a.contract]),i=R(s),l=i.fetching,o=i.data,d=i.error;return l||!o&&!d?Object(n.jsx)(M,{}):Object(n.jsxs)(j.a,{w:"full",children:[Object(n.jsx)(v.a,{size:"sm",align:"left",marginBottom:"2",children:"Balance for your account:"}),Object(n.jsx)(L.a,{readOnly:!0,defaultValue:d||o,isInvalid:!!d})]})},D=function(e){var t=e.contractAddress,c=e.pkh,a=T().Tezos,s=Object(r.useState)("10"),i=Object(f.a)(s,2),l=i[0],o=i[1],d=Object(r.useState)(""),b=Object(f.a)(d,2),u=b[0],h=b[1],O=Object(r.useState)(!1),x=Object(f.a)(O,2),m=x[0],p=x[1],k=Object(r.useCallback)(Object(y.a)(N.a.mark((function e(){var n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.prev=1,e.next=4,a.wallet.at(t);case 4:return n=e.sent,e.next=7,n.methods.transfer(c,u,Number(l)).send();case 7:return r=e.sent,e.next=10,r.confirmation(1);case 10:alert("One confirmation has been received from the network!"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0);case 16:return e.prev=16,p(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])}))),[t,c,l,u,p,a.wallet]);return Object(n.jsxs)(j.a,{w:"full",children:[Object(n.jsx)(v.a,{size:"sm",align:"left",marginBottom:"2",children:"Transfer:"}),m?Object(n.jsx)(M,{mx:"auto",d:"block"}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(E.a,{placeholder:"tz1QLY8gCFzrezkqkQpHAHBRPvgtV9Z1KuML",value:u,onChange:function(e){return h(e.target.value)},marginBottom:"4"}),Object(n.jsxs)(z.a,{children:[Object(n.jsx)(A.b,{width:"7rem",children:Object(n.jsx)(g.a,{size:"sm",onClick:k,children:"Transfer"})}),Object(n.jsx)(E.a,{type:"number",onChange:function(e){return o(e.target.value)},value:l})]})]})]})},Q=function(e){var t=e.pkh;return Object(n.jsxs)(v.a,{children:["Your account: ",Object(n.jsx)(p.a,{children:t})]})};function J(){var e=T(),t=e.connect,c=e.pkh,a=e.disconnect,s=Object(r.useState)("KT19psPK1PZNMkaq8TuU1D77u7ipyFVQ3BmE"),i=Object(f.a)(s,2),l=i[0],o=i[1],j=Object(r.useState)(!1),d=Object(f.a)(j,2),b=d[0],u=d[1];return Object(r.useEffect)((function(){u(W(l))}),[l]),Object(n.jsx)("div",{className:"text-center",children:c?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(g.a,{className:"btn btn-primary submit-btn",variant:"outline",onClick:a,children:"Disconnect wallet"}),Object(n.jsx)(Q,{pkh:c}),Object(n.jsx)(k.a,{}),Object(n.jsx)(U,{value:l,onChange:function(e){return o(e.target.value)},isInvalid:!b}),b&&l&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(V,{contractAddress:l}),Object(n.jsx)(q,{contractAddress:l,pkh:c}),Object(n.jsx)(D,{contractAddress:l,pkh:c})]})]}):Object(n.jsx)(g.a,{className:"btn btn-primary submit-btn",onClick:t,children:"Connect wallet"})})}c(476);var Y={name:"Plenty Bonds Marketplace: Falcon Heavy",network:{type:"hangzhounet"}};var G=c(3),X=c(279),Z=c.n(X);c(494);function $(e){var t=e.setActiveItem,c=e.setModalActive,a=e.item;return console.log("item",a),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:a.icon}),Object(n.jsxs)("td",{children:[a.pair1_token_code," ",a.pair2_token_code]}),Object(n.jsx)("td",{children:a.market_price_in_usd}),Object(n.jsx)("td",{children:a.ROI}),Object(n.jsx)("td",{children:a.vesting_days_period}),Object(n.jsx)("td",{children:Object(n.jsx)("button",{onClick:function(){t(a),c(!0)},className:"bond_btn",children:"Bond"})})]})}c(495),c(496);function ee(e){var t=e.active,c=e.setActive,a=e.children;return Object(n.jsx)("div",{className:t?"modal active":"modal",onClick:function(){return c(!1)},children:Object(n.jsx)("div",{className:t?"modal__content active":"modal__content",onClick:function(e){return e.stopPropagation()},children:a})})}function te(){var e=Object(r.useState)(!1),t=Object(f.a)(e,2),c=t[0],a=t[1],s=Object(r.useState)([]),i=Object(f.a)(s,2),l=i[0],o=i[1],j=Object(r.useState)({}),d=Object(f.a)(j,2),b=d[0],u=d[1],h=Object(r.useState)(0),O=Object(f.a)(h,2),x=O[0],m=O[1],v=function(){var e=Object(y.a)(N.a.mark((function e(){var t,c,n=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:153491,e.next=3,Z.a.get("https://api.hangzhou2net.tzkt.io/v1/bigmaps/".concat(t,"/keys"),{headers:{"Access-Control-Allow-Origin":"*"}});case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){new C.a("https://hangzhounet.api.tez.ie").contract.at("KT1AfWJCfbmpGqdSB8rfRCR4Jb1VsBLmhGCV").then((function(e){e.storage().then((function(e){var t=e.bonds_marketplace.id.c[0];console.log("bigmapId",t),v(t).then((function(t){o(t),console.log("keys",t),console.log("value",t[0].value);var c=t.map((function(e){return parseInt(e.key)}));console.log("keysValues"),console.log("storage.bonds_marketplace",e.bonds_marketplace.get(c[0])),console.log("keysValues[0]",c)}))}))}))}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("table",{children:[Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Item icons"}),Object(n.jsx)("th",{children:"Item name"}),Object(n.jsx)("th",{children:"Market price USD"}),Object(n.jsx)("th",{children:"ROI"}),Object(n.jsx)("th",{children:"Duration"})]}),l.map((function(e){return Object(n.jsx)($,{setActiveItem:u,setModalActive:a,item:e.value})}))]}),Object(n.jsxs)(ee,{active:c,setActive:a,children:[console.log("active Item",b),Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{children:["TOKENS ",b.pair1_token_code," ",b.pair2_token_code]}),Object(n.jsx)("label",{className:"token__label",for:"amount",children:"Token amount"}),Object(n.jsx)("input",Object(G.a)({type:"number",id:"amount",onChange:function(e){m(e.target.value)},value:x},"type","number")),x>parseInt(b.max_payout)&&Object(n.jsx)("span",{children:"Error"}),Object(n.jsxs)("div",{children:["ROI ",x*parseInt(b.ROI)]}),Object(n.jsxs)("div",{children:["VESTING period ",b.vesting_days_period," months"]}),Object(n.jsxs)("div",{children:["TBV ",b.total_bonds_purchased_price_usd]})]}),Object(n.jsxs)("div",{className:"buttons",children:[Object(n.jsx)("button",{className:"modal__btn",children:"Confirm"}),Object(n.jsx)("button",{className:"modal__btn cancel__btn",onClick:function(){return a(!1)},children:"Cancel"})]})]})]})}function ce(){var e=function(){var e;return{buyBond:Object(r.useCallback)(Object(y.a)(N.a.mark((function t(){var c,n,a,r,s,i;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=1,n="KT1GgNMoJhfeWUoqh1RJaFXE1H66tja7L1eU",a=1e3,r=.5,s=new C.a(S),i=new _.a(Y),t.next=8,i.client.getActiveAccount();case 8:t.sent,t.next=14;break;case 14:return t.next=16,i.requestPermissions(Y);case 16:return t.next=18,i.getPKH();case 18:e=t.sent,console.log("New connection:",e);case 20:s.setWalletProvider(i),s.wallet.at("KT1V9gTAvhuXgb7egVjn6BtCfU4BMtjfvWfR").then((function(t){return t.methods.order(c,a,n,r).send({from:e})}));case 22:case"end":return t.stop()}}),t)}))),[])}}().buyBond;return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{className:"content",children:Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("div",{className:"col-lg-12",children:Object(n.jsx)("div",{className:"crypto-exchange buy-form",children:Object(n.jsxs)("div",{className:"",children:[Object(n.jsx)("div",{className:"card-title text-center",children:Object(n.jsx)("h4",{className:"text-primary",children:"Bond: PLENTY-QUIPU LP"})}),Object(n.jsx)("div",{children:Object(n.jsxs)("div",{className:"row",children:[Object(n.jsxs)("div",{className:"col-lg-6 text-center card-title",children:[Object(n.jsx)("h4",{className:"text-primary",children:"Bond Price"}),Object(n.jsx)("h2",{className:"text-primary",children:"$3.03"})]}),Object(n.jsxs)("div",{className:"col-lg-6 text-center card-title",children:[Object(n.jsx)("h4",{className:"text-primary",children:"Market Price"}),Object(n.jsx)("h2",{className:"text-primary",children:"$3.01"})]})]})}),Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("div",{className:"col-lg-12 ",children:Object(n.jsx)("div",{className:"exchange-form",children:Object(n.jsx)("form",{children:Object(n.jsx)("div",{className:"form-row ",children:Object(n.jsx)("div",{className:"col-lg-6 col-md-12 offset-lg-3",children:Object(n.jsx)(g.a,{className:"btn btn-primary btn-lg btn-block",onClick:e,children:"Buy"})})})})})})}),Object(n.jsx)(te,{}),Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("div",{className:"col-lg-12 details-contatiner",children:[Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col-lg-6 ",children:"Your Balance"}),Object(n.jsxs)("div",{className:"col-lg-6 text-right",children:["0 PLENTY-QUIPU LP",Object(n.jsx)("div",{children:Object(n.jsx)("a",{href:"https://www.plentydefi.com/liquidity?tokenB=QUIPU",target:"_blank",className:"gray-link",children:"Buy PLENTY-QUIPU LP token"})})]})]}),Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col-lg-6 ",children:"Duration"}),Object(n.jsx)("div",{className:"col-lg-6 text-right",children:"5 days"})]}),Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col-lg-6 ",children:"ROI"}),Object(n.jsx)("div",{className:"col-lg-6 text-right",children:"3%"})]})]})})]})})})})})})}var ne=c(138),ae=c(14);c(497);function re(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(ne.a,{children:[Object(n.jsx)("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css",integrity:"sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"}),Object(n.jsxs)("div",{className:"main-wrapper",children:[Object(n.jsx)("div",{className:"header",children:Object(n.jsx)("div",{className:"header-left",children:Object(n.jsxs)("a",{href:"index.html",className:"logo",children:[Object(n.jsx)("img",{src:"assets/img/logo.png",width:35,height:35,alt:""})," ",Object(n.jsx)("span",{children:"Falcon Heavy"})]})})}),Object(n.jsx)("div",{className:"sidebar",id:"sidebar",children:Object(n.jsx)("div",{className:"sidebar-inner slimscroll",children:Object(n.jsx)("div",{id:"sidebar-menu",className:"sidebar-menu",children:Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:Object(n.jsx)(ne.b,{to:"/",children:"Dashboard"})}),Object(n.jsx)("li",{children:Object(n.jsx)(ne.b,{to:"/buy-bond",children:"Buy bond"})})]})})})}),Object(n.jsx)("div",{className:"page-wrapper exchange-wrapper bg-wrapper",children:Object(n.jsx)("div",{className:"content",children:Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("div",{className:"col-lg-12",children:Object(n.jsxs)(ae.c,{children:[Object(n.jsx)(ae.a,{path:"/buy-bond",element:Object(n.jsx)(ce,{})}),Object(n.jsx)(ae.a,{path:"/users",children:Object(n.jsx)(n.Fragment,{children:"users"})}),Object(n.jsx)(ae.a,{path:"/",element:Object(n.jsx)(J,{})})]})})})})})]})]})})}var se=function(){return Object(n.jsx)(l.a,{theme:o.b,children:Object(n.jsx)(j.a,{fontSize:"xl",children:Object(n.jsxs)(d.a,{minH:"100vh",p:3,children:[Object(n.jsx)(m,{justifySelf:"flex-end"}),Object(n.jsx)(b.a,{spacing:8,children:Object(n.jsx)(re,{})})]})})})},ie=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,544)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),n(e),a(e),r(e),s(e)}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(n.jsxs)(r.StrictMode,{children:[Object(n.jsx)(a.a,{}),Object(n.jsx)(se,{})]}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),ie()}},[[498,1,2]]]);
//# sourceMappingURL=main.c3c798d1.chunk.js.map