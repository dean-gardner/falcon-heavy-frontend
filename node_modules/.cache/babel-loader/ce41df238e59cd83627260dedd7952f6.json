{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\work\\\\projects\\\\plenty\\\\falcon-heavy-frontend\\\\src\\\\components\\\\ContractTransferForm.tsx\",\n    _s = $RefreshSig$();\n\nimport { Box, Button, Input, InputGroup, InputRightElement, Text } from \"@chakra-ui/react\";\nimport React, { useCallback, useState } from \"react\";\nimport useBeacon from \"../hooks/useBeacon\";\nimport { Preloader } from \"./Preloader\";\nexport const ContractTransferForm = _ref => {\n  _s();\n\n  let {\n    contractAddress,\n    pkh\n  } = _ref;\n  const {\n    Tezos\n  } = useBeacon();\n  const [amount, setAmount] = useState(\"10\");\n  const [to, setTo] = useState(\"\");\n  const [fetching, setFetching] = useState(false);\n  const handleClick = useCallback(async () => {\n    setFetching(true);\n\n    try {\n      const contract = await Tezos.wallet.at(contractAddress);\n      const op = await contract.methods.transfer(pkh, to, Number(amount)).send();\n      await op.confirmation(1);\n      alert(\"One confirmation has been received from the network!\");\n    } catch (e) {\n      console.error(e);\n    } finally {\n      setFetching(false);\n    }\n  }, [contractAddress, pkh, amount, to, setFetching, Tezos.wallet]);\n  return /*#__PURE__*/_jsxDEV(Box, {\n    w: \"full\",\n    children: [/*#__PURE__*/_jsxDEV(Text, {\n      size: \"sm\",\n      align: \"left\",\n      marginBottom: \"2\",\n      children: \"Transfer:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this), !fetching ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Input, {\n        placeholder: \"tz1QLY8gCFzrezkqkQpHAHBRPvgtV9Z1KuML\",\n        value: to,\n        onChange: e => setTo(e.target.value),\n        marginBottom: \"4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(InputGroup, {\n        children: [/*#__PURE__*/_jsxDEV(InputRightElement, {\n          width: \"7rem\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            size: \"sm\",\n            onClick: handleClick,\n            children: \"Transfer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"number\",\n          onChange: e => setAmount(e.target.value),\n          value: amount\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(Preloader, {\n      mx: \"auto\",\n      d: \"block\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ContractTransferForm, \"WxSWfTDJDGelEF97wQpxYCW6gzQ=\", false, function () {\n  return [useBeacon];\n});\n\n_c = ContractTransferForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"ContractTransferForm\");","map":{"version":3,"sources":["D:/work/projects/plenty/falcon-heavy-frontend/src/components/ContractTransferForm.tsx"],"names":["Box","Button","Input","InputGroup","InputRightElement","Text","React","useCallback","useState","useBeacon","Preloader","ContractTransferForm","contractAddress","pkh","Tezos","amount","setAmount","to","setTo","fetching","setFetching","handleClick","contract","wallet","at","op","methods","transfer","Number","send","confirmation","alert","e","console","error","target","value"],"mappings":"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","sourcesContent":["import {\r\n  Box,\r\n  Button,\r\n  Input,\r\n  InputGroup,\r\n  InputRightElement,\r\n  Text,\r\n} from \"@chakra-ui/react\";\r\nimport React, { useCallback, useState } from \"react\";\r\nimport useBeacon from \"../hooks/useBeacon\";\r\nimport { Preloader } from \"./Preloader\";\r\n\r\nexport const ContractTransferForm: React.FC<{\r\n  contractAddress: string;\r\n  pkh: string;\r\n}> = ({ contractAddress, pkh }) => {\r\n  const { Tezos } = useBeacon();\r\n  const [amount, setAmount] = useState(\"10\");\r\n  const [to, setTo] = useState(\"\");\r\n  const [fetching, setFetching] = useState(false);\r\n\r\n  const handleClick = useCallback(async () => {\r\n    setFetching(true);\r\n    try {\r\n      const contract = await Tezos.wallet.at(contractAddress);\r\n      const op = await contract.methods\r\n        .transfer(pkh, to, Number(amount))\r\n        .send();\r\n\r\n      await op.confirmation(1);\r\n\r\n      alert(\"One confirmation has been received from the network!\");\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      setFetching(false);\r\n    }\r\n  }, [contractAddress, pkh, amount, to, setFetching, Tezos.wallet]);\r\n\r\n  return (\r\n    <Box w=\"full\">\r\n      <Text size=\"sm\" align=\"left\" marginBottom=\"2\">\r\n        Transfer:\r\n      </Text>\r\n      {!fetching ? (\r\n        <>\r\n          <Input\r\n            placeholder=\"tz1QLY8gCFzrezkqkQpHAHBRPvgtV9Z1KuML\"\r\n            value={to}\r\n            onChange={(e) => setTo(e.target.value)}\r\n            marginBottom=\"4\"\r\n          />\r\n          <InputGroup>\r\n            <InputRightElement\r\n              width=\"7rem\"\r\n              children={\r\n                <Button size=\"sm\" onClick={handleClick}>\r\n                  Transfer\r\n                </Button>\r\n              }\r\n            />\r\n            <Input\r\n              type=\"number\"\r\n              onChange={(e) => setAmount(e.target.value)}\r\n              value={amount}\r\n            />\r\n          </InputGroup>\r\n        </>\r\n      ) : (\r\n        <Preloader mx=\"auto\" d=\"block\" />\r\n      )}\r\n    </Box>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}