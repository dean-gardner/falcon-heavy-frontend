{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport axios from 'axios';\nimport { keys } from '../utils/utils';\nconst CLIENT_API_R0 = '/_matrix/client/r0';\nexport class MatrixHttpClient {\n  constructor(baseUrl) {\n    this.baseUrl = baseUrl;\n  }\n\n  get(endpoint, params, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n      return this.send('GET', endpoint, options, params);\n    });\n  }\n\n  post(endpoint, body, options, params) {\n    return __awaiter(this, void 0, void 0, function* () {\n      return this.send('POST', endpoint, options, params, body);\n    });\n  }\n\n  put(endpoint, body, options, params) {\n    return __awaiter(this, void 0, void 0, function* () {\n      return this.send('PUT', endpoint, options, params, body);\n    });\n  }\n\n  send(method, endpoint, config, requestParams, data) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const headers = config ? this.getHeaders(config) : undefined;\n      const params = requestParams ? this.getParams(requestParams) : undefined;\n      const response = yield axios.request({\n        method,\n        url: endpoint,\n        baseURL: this.apiUrl(CLIENT_API_R0),\n        headers,\n        data,\n        params\n      });\n      return response.data;\n    });\n  }\n\n  getHeaders(options) {\n    const headers = {};\n    const entries = [];\n\n    if (options.accessToken) {\n      entries.push(['Authorization', `Bearer ${options.accessToken}`]);\n    }\n\n    if (entries.length === 0) {\n      return undefined;\n    }\n\n    for (const [key, value] of entries) {\n      headers[key] = value;\n    }\n\n    return headers;\n  }\n\n  getParams(_params) {\n    if (!_params) {\n      return undefined;\n    }\n\n    const params = Object.assign(_params, {});\n    keys(params).forEach(key => params[key] === undefined && delete params[key]);\n    return params;\n  }\n\n  apiUrl() {\n    const apiBase = this.baseUrl.endsWith('/') ? this.baseUrl.substr(0, this.baseUrl.length - 1) : this.baseUrl;\n\n    for (var _len = arguments.length, parts = new Array(_len), _key = 0; _key < _len; _key++) {\n      parts[_key] = arguments[_key];\n    }\n\n    const apiParts = parts.map(path => path.startsWith('/') ? path.substr(1) : path);\n    return [apiBase, ...apiParts].join('/');\n  }\n\n}","map":{"version":3,"mappings":"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","names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","axios","keys","CLIENT_API_R0","MatrixHttpClient","constructor","baseUrl","get","endpoint","params","options","send","post","body","put","method","config","requestParams","data","headers","getHeaders","undefined","getParams","response","request","url","baseURL","apiUrl","entries","accessToken","push","length","key","_params","Object","assign","forEach","apiBase","endsWith","substr","parts","apiParts","map","path","startsWith","join"],"sourceRoot":"","sources":["D:/work/projects/plenty/falcon-heavy-frontend/node_modules/@airgap/beacon-sdk/dist/esm/matrix-client/MatrixHttpClient.js"],"sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport axios from 'axios';\nimport { keys } from '../utils/utils';\nconst CLIENT_API_R0 = '/_matrix/client/r0';\nexport class MatrixHttpClient {\n    constructor(baseUrl) {\n        this.baseUrl = baseUrl;\n    }\n    get(endpoint, params, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.send('GET', endpoint, options, params);\n        });\n    }\n    post(endpoint, body, options, params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.send('POST', endpoint, options, params, body);\n        });\n    }\n    put(endpoint, body, options, params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.send('PUT', endpoint, options, params, body);\n        });\n    }\n    send(method, endpoint, config, requestParams, data) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const headers = config ? this.getHeaders(config) : undefined;\n            const params = requestParams ? this.getParams(requestParams) : undefined;\n            const response = yield axios.request({\n                method,\n                url: endpoint,\n                baseURL: this.apiUrl(CLIENT_API_R0),\n                headers,\n                data,\n                params\n            });\n            return response.data;\n        });\n    }\n    getHeaders(options) {\n        const headers = {};\n        const entries = [];\n        if (options.accessToken) {\n            entries.push(['Authorization', `Bearer ${options.accessToken}`]);\n        }\n        if (entries.length === 0) {\n            return undefined;\n        }\n        for (const [key, value] of entries) {\n            headers[key] = value;\n        }\n        return headers;\n    }\n    getParams(_params) {\n        if (!_params) {\n            return undefined;\n        }\n        const params = Object.assign(_params, {});\n        keys(params).forEach((key) => params[key] === undefined && delete params[key]);\n        return params;\n    }\n    apiUrl(...parts) {\n        const apiBase = this.baseUrl.endsWith('/')\n            ? this.baseUrl.substr(0, this.baseUrl.length - 1)\n            : this.baseUrl;\n        const apiParts = parts.map((path) => (path.startsWith('/') ? path.substr(1) : path));\n        return [apiBase, ...apiParts].join('/');\n    }\n}\n//# sourceMappingURL=MatrixHttpClient.js.map"]},"metadata":{},"sourceType":"module"}