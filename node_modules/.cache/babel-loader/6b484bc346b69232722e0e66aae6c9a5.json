{"ast":null,"code":"import { Buffer } from 'buffer';\n\nvar _a, _b;\n\nvar Prefix;\n\n(function (Prefix) {\n  Prefix[\"TZ1\"] = \"tz1\";\n  Prefix[\"TZ2\"] = \"tz2\";\n  Prefix[\"TZ3\"] = \"tz3\";\n  Prefix[\"KT\"] = \"KT\";\n  Prefix[\"KT1\"] = \"KT1\";\n  Prefix[\"EDSK2\"] = \"edsk2\";\n  Prefix[\"SPSK\"] = \"spsk\";\n  Prefix[\"P2SK\"] = \"p2sk\";\n  Prefix[\"EDPK\"] = \"edpk\";\n  Prefix[\"SPPK\"] = \"sppk\";\n  Prefix[\"P2PK\"] = \"p2pk\";\n  Prefix[\"EDESK\"] = \"edesk\";\n  Prefix[\"SPESK\"] = \"spesk\";\n  Prefix[\"P2ESK\"] = \"p2esk\";\n  Prefix[\"EDSK\"] = \"edsk\";\n  Prefix[\"EDSIG\"] = \"edsig\";\n  Prefix[\"SPSIG\"] = \"spsig\";\n  Prefix[\"P2SIG\"] = \"p2sig\";\n  Prefix[\"SIG\"] = \"sig\";\n  Prefix[\"NET\"] = \"Net\";\n  Prefix[\"NCE\"] = \"nce\";\n  Prefix[\"B\"] = \"b\";\n  Prefix[\"O\"] = \"o\";\n  Prefix[\"LO\"] = \"Lo\";\n  Prefix[\"LLO\"] = \"LLo\";\n  Prefix[\"P\"] = \"P\";\n  Prefix[\"CO\"] = \"Co\";\n  Prefix[\"ID\"] = \"id\";\n  Prefix[\"EXPR\"] = \"expr\";\n  Prefix[\"TZ\"] = \"TZ\";\n})(Prefix || (Prefix = {}));\n\nvar prefix = (_a = {}, _a[Prefix.TZ1] = new Uint8Array([6, 161, 159]), _a[Prefix.TZ2] = new Uint8Array([6, 161, 161]), _a[Prefix.TZ3] = new Uint8Array([6, 161, 164]), _a[Prefix.KT] = new Uint8Array([2, 90, 121]), _a[Prefix.KT1] = new Uint8Array([2, 90, 121]), _a[Prefix.EDSK] = new Uint8Array([43, 246, 78, 7]), _a[Prefix.EDSK2] = new Uint8Array([13, 15, 58, 7]), _a[Prefix.SPSK] = new Uint8Array([17, 162, 224, 201]), _a[Prefix.P2SK] = new Uint8Array([16, 81, 238, 189]), _a[Prefix.EDPK] = new Uint8Array([13, 15, 37, 217]), _a[Prefix.SPPK] = new Uint8Array([3, 254, 226, 86]), _a[Prefix.P2PK] = new Uint8Array([3, 178, 139, 127]), _a[Prefix.EDESK] = new Uint8Array([7, 90, 60, 179, 41]), _a[Prefix.SPESK] = new Uint8Array([0x09, 0xed, 0xf1, 0xae, 0x96]), _a[Prefix.P2ESK] = new Uint8Array([0x09, 0x30, 0x39, 0x73, 0xab]), _a[Prefix.EDSIG] = new Uint8Array([9, 245, 205, 134, 18]), _a[Prefix.SPSIG] = new Uint8Array([13, 115, 101, 19, 63]), _a[Prefix.P2SIG] = new Uint8Array([54, 240, 44, 52]), _a[Prefix.SIG] = new Uint8Array([4, 130, 43]), _a[Prefix.NET] = new Uint8Array([87, 82, 0]), _a[Prefix.NCE] = new Uint8Array([69, 220, 169]), _a[Prefix.B] = new Uint8Array([1, 52]), _a[Prefix.O] = new Uint8Array([5, 116]), _a[Prefix.LO] = new Uint8Array([133, 233]), _a[Prefix.LLO] = new Uint8Array([29, 159, 109]), _a[Prefix.P] = new Uint8Array([2, 170]), _a[Prefix.CO] = new Uint8Array([79, 179]), _a[Prefix.ID] = new Uint8Array([153, 103]), _a[Prefix.EXPR] = new Uint8Array([13, 44, 64, 27]), // Legacy prefix\n_a[Prefix.TZ] = new Uint8Array([2, 90, 121]), _a);\nvar prefixLength = (_b = {}, _b[Prefix.TZ1] = 20, _b[Prefix.TZ2] = 20, _b[Prefix.TZ3] = 20, _b[Prefix.KT] = 20, _b[Prefix.KT1] = 20, _b[Prefix.EDPK] = 32, _b[Prefix.SPPK] = 33, _b[Prefix.P2PK] = 33, _b[Prefix.EDSIG] = 64, _b[Prefix.SPSIG] = 64, _b[Prefix.P2SIG] = 64, _b[Prefix.SIG] = 64, _b[Prefix.NET] = 4, _b[Prefix.B] = 32, _b[Prefix.P] = 32, _b);\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\nfunction __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n}\n\nfunction __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n\n  return ar;\n}\n\nvar bs58check = require('bs58check');\n\nvar ValidationResult;\n\n(function (ValidationResult) {\n  ValidationResult[ValidationResult[\"NO_PREFIX_MATCHED\"] = 0] = \"NO_PREFIX_MATCHED\";\n  ValidationResult[ValidationResult[\"INVALID_CHECKSUM\"] = 1] = \"INVALID_CHECKSUM\";\n  ValidationResult[ValidationResult[\"INVALID_LENGTH\"] = 2] = \"INVALID_LENGTH\";\n  ValidationResult[ValidationResult[\"VALID\"] = 3] = \"VALID\";\n})(ValidationResult || (ValidationResult = {}));\n\nfunction isValidPrefix(value) {\n  if (typeof value !== 'string') {\n    return false;\n  }\n\n  return value in prefix;\n}\n/**\r\n * @description This function is called by the validation functions ([[validateAddress]], [[validateChain]], [[validateContractAddress]], [[validateKeyHash]], [[validateSignature]], [[validatePublicKey]]).\r\n * Verify if the value has the right prefix or return `NO_PREFIX_MATCHED`,\r\n * decode the value using base58 and return `INVALID_CHECKSUM` if it fails,\r\n * check if the length of the value matches the prefix type or return `INVALID_LENGTH`.\r\n * If all checks pass, return `VALID`.\r\n *\r\n * @param value Value to validate\r\n * @param prefixes prefix the value should have\r\n */\n\n\nfunction validatePrefixedValue(value, prefixes) {\n  var match = new RegExp(\"^(\" + prefixes.join('|') + \")\").exec(value);\n\n  if (!match || match.length === 0) {\n    return ValidationResult.NO_PREFIX_MATCHED;\n  }\n\n  var prefixKey = match[0];\n\n  if (!isValidPrefix(prefixKey)) {\n    return ValidationResult.NO_PREFIX_MATCHED;\n  } // decodeUnsafe return undefined if decoding fail\n\n\n  var decoded = bs58check.decodeUnsafe(value);\n\n  if (!decoded) {\n    return ValidationResult.INVALID_CHECKSUM;\n  }\n\n  decoded = decoded.slice(prefix[prefixKey].length);\n\n  if (decoded.length !== prefixLength[prefixKey]) {\n    return ValidationResult.INVALID_LENGTH;\n  }\n\n  return ValidationResult.VALID;\n}\n\nvar implicitPrefix = [Prefix.TZ1, Prefix.TZ2, Prefix.TZ3];\nvar contractPrefix = [Prefix.KT1];\nvar signaturePrefix = [Prefix.EDSIG, Prefix.P2SIG, Prefix.SPSIG, Prefix.SIG];\nvar pkPrefix = [Prefix.EDPK, Prefix.SPPK, Prefix.P2PK];\n/**\r\n * @description Used to check if an address or a contract address is valid.\r\n *\r\n * @returns\r\n * 0 (NO_PREFIX_MATCHED), 1 (INVALID_CHECKSUM), 2 (INVALID_LENGTH) or 3 (VALID).\r\n *\r\n * @example\r\n * ```\r\n * import { validateAddress } from '@taquito/utils';\r\n * const pkh = 'tz1L9r8mWmRPndRhuvMCWESLGSVeFzQ9NAWx'\r\n * const validation = validateAddress(pkh)\r\n * console.log(validation)\r\n * // This example return 3 which correspond to VALID\r\n * ```\r\n */\n\nfunction validateAddress(value) {\n  return validatePrefixedValue(value, __spread(implicitPrefix, contractPrefix));\n}\n/**\r\n * @description Used to check if a chain id is valid.\r\n *\r\n * @returns\r\n * 0 (NO_PREFIX_MATCHED), 1 (INVALID_CHECKSUM), 2 (INVALID_LENGTH) or 3 (VALID).\r\n *\r\n * @example\r\n * ```\r\n * import { validateChain } from '@taquito/utils';\r\n * const chainId = 'NetXdQprcVkpaWU'\r\n * const validation = validateChain(chainId)\r\n * console.log(validation)\r\n * // This example return 3 which correspond to VALID\r\n * ```\r\n */\n\n\nfunction validateChain(value) {\n  return validatePrefixedValue(value, [Prefix.NET]);\n}\n/**\r\n * @description Used to check if a contract address is valid.\r\n *\r\n * @returns\r\n * 0 (NO_PREFIX_MATCHED), 1 (INVALID_CHECKSUM), 2 (INVALID_LENGTH) or 3 (VALID).\r\n *\r\n * @example\r\n * ```\r\n * import { validateContractAddress } from '@taquito/utils';\r\n * const contractAddress = 'KT1JVErLYTgtY8uGGZ4mso2npTSxqVLDRVbC'\r\n * const validation = validateContractAddress(contractAddress)\r\n * console.log(validation)\r\n * // This example return 3 which correspond to VALID\r\n * ```\r\n */\n\n\nfunction validateContractAddress(value) {\n  return validatePrefixedValue(value, contractPrefix);\n}\n/**\r\n * @description Used to check if a key hash is valid.\r\n *\r\n * @returns\r\n * 0 (NO_PREFIX_MATCHED), 1 (INVALID_CHECKSUM), 2 (INVALID_LENGTH) or 3 (VALID).\r\n *\r\n * @example\r\n * ```\r\n * import { validateKeyHash } from '@taquito/utils';\r\n * const keyHashWithoutPrefix = '1L9r8mWmRPndRhuvMCWESLGSVeFzQ9NAWx'\r\n * const validation = validateKeyHash(keyHashWithoutPrefix)\r\n * console.log(validation)\r\n * // This example return 0 which correspond to NO_PREFIX_MATCHED\r\n * ```\r\n */\n\n\nfunction validateKeyHash(value) {\n  return validatePrefixedValue(value, implicitPrefix);\n}\n/**\r\n * @description Used to check if a signature is valid.\r\n *\r\n * @returns\r\n * 0 (NO_PREFIX_MATCHED), 1 (INVALID_CHECKSUM), 2 (INVALID_LENGTH) or 3 (VALID).\r\n *\r\n * @example\r\n * ```\r\n * import { validateSignature } from '@taquito/utils';\r\n * const signature = 'edsigtkpiSSschcaCt9pUVrpNPf7TTcgvgDEDD6NCEHMy8NNQJCGnMfLZzYoQj74yLjo9wx6MPVV29CvVzgi7qEcEUok3k7AuMg'\r\n * const validation = validateSignature(signature)\r\n * console.log(validation)\r\n * // This example return 3 which correspond to VALID\r\n * ```\r\n */\n\n\nfunction validateSignature(value) {\n  return validatePrefixedValue(value, signaturePrefix);\n}\n/**\r\n * @description Used to check if a signature is valid.\r\n *\r\n * @returns\r\n * 0 (NO_PREFIX_MATCHED), 1 (INVALID_CHECKSUM), 2 (INVALID_LENGTH) or 3 (VALID).\r\n *\r\n * @example\r\n * ```\r\n * import { validatePublicKey } from '@taquito/utils';\r\n * const publicKey = 'edsigtkpiSSschcaCt9pUVrpNPf7TTcgvgDEDD6NCEHMy8NNQJCGnMfLZzYoQj74yLjo9wx6MPVV29CvVzgi7qEcEUok3k7AuMg'\r\n * const validation = validatePublicKey(publicKey)\r\n * console.log(validation)\r\n * // This example return 3 which correspond to VALID\r\n * ```\r\n */\n\n\nfunction validatePublicKey(value) {\n  return validatePrefixedValue(value, pkPrefix);\n}\n/*\r\n * Some code in this file is originally from sotez and eztz\r\n * Copyright (c) 2018 Andrew Kishino\r\n * Copyright (c) 2017 Stephen Andrews\r\n */\n\n\nvar blake = require('blakejs');\n\nvar bs58check$1 = require('bs58check');\n/**\r\n *\r\n * @description Hash a string using the BLAKE2b algorithm, base58 encode the hash obtained and appends the prefix 'expr' to it\r\n *\r\n * @param value Value in hex\r\n */\n\n\nfunction encodeExpr(value) {\n  var blakeHash = blake.blake2b(hex2buf(value), null, 32);\n  return b58cencode(blakeHash, prefix['expr']);\n}\n/**\r\n *\r\n * @description Base58 encode a string or a Uint8Array and append a prefix to it\r\n *\r\n * @param value Value to base58 encode\r\n * @param prefix prefix to append to the encoded string\r\n */\n\n\nfunction b58cencode(value, prefix) {\n  var payloadAr = typeof value === 'string' ? Uint8Array.from(Buffer.from(value, 'hex')) : value;\n  var n = new Uint8Array(prefix.length + payloadAr.length);\n  n.set(prefix);\n  n.set(payloadAr, prefix.length);\n  return bs58check$1.encode(Buffer.from(n.buffer));\n}\n/**\r\n *\r\n * @description Base58 decode a string and remove the prefix from it\r\n *\r\n * @param value Value to base58 decode\r\n * @param prefix prefix to remove from the decoded string\r\n */\n\n\nvar b58cdecode = function (enc, prefixArg) {\n  return bs58check$1.decode(enc).slice(prefixArg.length);\n};\n/**\r\n *\r\n * @description Base58 decode a string with predefined prefix\r\n *\r\n * @param value Value to base58 decode\r\n */\n\n\nfunction b58decode(payload) {\n  var _a;\n\n  var buf = bs58check$1.decode(payload);\n  var prefixMap = (_a = {}, _a[prefix.tz1.toString()] = '0000', _a[prefix.tz2.toString()] = '0001', _a[prefix.tz3.toString()] = '0002', _a);\n  var pref = prefixMap[new Uint8Array(buf.slice(0, 3)).toString()];\n\n  if (pref) {\n    // tz addresses\n    var hex = buf2hex(buf.slice(3));\n    return pref + hex;\n  } else {\n    // other (kt addresses)\n    return '01' + buf2hex(buf.slice(3, 42)) + '00';\n  }\n}\n/**\r\n *\r\n * @description Base58 encode a public key using predefined prefix\r\n *\r\n * @param value Public Key to base58 encode\r\n */\n\n\nfunction encodePubKey(value) {\n  if (value.substring(0, 2) === '00') {\n    var pref = {\n      '0000': prefix.tz1,\n      '0001': prefix.tz2,\n      '0002': prefix.tz3\n    };\n    return b58cencode(value.substring(4), pref[value.substring(0, 4)]);\n  }\n\n  return b58cencode(value.substring(2, 42), prefix.KT);\n}\n/**\r\n *\r\n * @description Base58 encode a key according to its prefix\r\n *\r\n * @param value Key to base58 encode\r\n */\n\n\nfunction encodeKey(value) {\n  if (value[0] === '0') {\n    var pref = {\n      '00': new Uint8Array([13, 15, 37, 217]),\n      '01': new Uint8Array([3, 254, 226, 86]),\n      '02': new Uint8Array([3, 178, 139, 127])\n    };\n    return b58cencode(value.substring(2), pref[value.substring(0, 2)]);\n  }\n}\n/**\r\n *\r\n * @description Base58 encode a key hash according to its prefix\r\n *\r\n * @param value Key to base58 encode\r\n */\n\n\nfunction encodeKeyHash(value) {\n  if (value[0] === '0') {\n    var pref = {\n      '00': new Uint8Array([6, 161, 159]),\n      '01': new Uint8Array([6, 161, 161]),\n      '02': new Uint8Array([6, 161, 164])\n    };\n    return b58cencode(value.substring(2), pref[value.substring(0, 2)]);\n  }\n}\n/**\r\n *\r\n * @description Convert an hex string to a Uint8Array\r\n *\r\n * @param hex Hex string to convert\r\n */\n\n\nvar hex2buf = function (hex) {\n  return new Uint8Array(hex.match(/[\\da-f]{2}/gi).map(function (h) {\n    return parseInt(h, 16);\n  }));\n};\n/**\r\n *\r\n * @description Merge 2 buffers together\r\n *\r\n * @param b1 First buffer\r\n * @param b2 Second buffer\r\n */\n\n\nvar mergebuf = function (b1, b2) {\n  var r = new Uint8Array(b1.length + b2.length);\n  r.set(b1);\n  r.set(b2, b1.length);\n  return r;\n};\n/**\r\n *\r\n * @description Flatten a michelson json representation to an array\r\n *\r\n * @param s michelson json\r\n */\n\n\nvar mic2arr = function me2(s) {\n  var ret = [];\n\n  if (Object.prototype.hasOwnProperty.call(s, 'prim')) {\n    if (s.prim === 'Pair') {\n      ret.push(me2(s.args[0]));\n      ret = ret.concat(me2(s.args[1]));\n    } else if (s.prim === 'Elt') {\n      ret = {\n        key: me2(s.args[0]),\n        val: me2(s.args[1])\n      };\n    } else if (s.prim === 'True') {\n      ret = true;\n    } else if (s.prim === 'False') {\n      ret = false;\n    }\n  } else if (Array.isArray(s)) {\n    var sc = s.length;\n\n    for (var i = 0; i < sc; i++) {\n      var n = me2(s[i]);\n\n      if (typeof n.key !== 'undefined') {\n        if (Array.isArray(ret)) {\n          ret = {\n            keys: [],\n            vals: []\n          };\n        }\n\n        ret.keys.push(n.key);\n        ret.vals.push(n.val);\n      } else {\n        ret.push(n);\n      }\n    }\n  } else if (Object.prototype.hasOwnProperty.call(s, 'string')) {\n    ret = s.string;\n  } else if (Object.prototype.hasOwnProperty.call(s, 'int')) {\n    ret = parseInt(s.int, 10);\n  } else {\n    ret = s;\n  }\n\n  return ret;\n};\n/**\r\n *\r\n * @description Convert a buffer to an hex string\r\n *\r\n * @param buffer Buffer to convert\r\n */\n\n\nvar buf2hex = function (buffer) {\n  var byteArray = new Uint8Array(buffer);\n  var hexParts = [];\n  byteArray.forEach(function (byte) {\n    var hex = byte.toString(16);\n    var paddedHex = (\"00\" + hex).slice(-2);\n    hexParts.push(paddedHex);\n  });\n  return hexParts.join('');\n};\n\nexport { Prefix, ValidationResult, b58cdecode, b58cencode, b58decode, buf2hex, encodeExpr, encodeKey, encodeKeyHash, encodePubKey, hex2buf, isValidPrefix, mergebuf, mic2arr, prefix, prefixLength, validateAddress, validateChain, validateContractAddress, validateKeyHash, validatePublicKey, validateSignature };","map":{"version":3,"mappings":"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AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASI,aAAT,CAAuB7B,KAAvB,EAA8B;AAC1B,SAAOU,qBAAqB,CAACV,KAAD,EAAQ,CAAChD,MAAM,CAACsB,GAAR,CAAR,CAA5B;AACH;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASwD,uBAAT,CAAiC9B,KAAjC,EAAwC;AACpC,SAAOU,qBAAqB,CAACV,KAAD,EAAQyB,cAAR,CAA5B;AACH;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASM,eAAT,CAAyB/B,KAAzB,EAAgC;AAC5B,SAAOU,qBAAqB,CAACV,KAAD,EAAQwB,cAAR,CAA5B;AACH;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASQ,iBAAT,CAA2BhC,KAA3B,EAAkC;AAC9B,SAAOU,qBAAqB,CAACV,KAAD,EAAQ0B,eAAR,CAA5B;AACH;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASO,iBAAT,CAA2BjC,KAA3B,EAAkC;AAC9B,SAAOU,qBAAqB,CAACV,KAAD,EAAQ2B,QAAR,CAA5B;AACH;AAED;AACA;AACA;AACA;AACA;;;AACA,IAAIO,KAAK,GAAG3B,OAAO,CAAC,SAAD,CAAnB;;AACA,IAAI4B,WAAW,GAAG5B,OAAO,CAAC,WAAD,CAAzB;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAAS6B,UAAT,CAAoBpC,KAApB,EAA2B;AACvB,MAAIqC,SAAS,GAAGH,KAAK,CAACI,OAAN,CAAcC,OAAO,CAACvC,KAAD,CAArB,EAA8B,IAA9B,EAAoC,EAApC,CAAhB;AACA,SAAOwC,UAAU,CAACH,SAAD,EAAYpF,MAAM,CAAC,MAAD,CAAlB,CAAjB;AACH;AA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","names":["Buffer","_a","_b","Prefix","prefix","TZ1","Uint8Array","TZ2","TZ3","KT","KT1","EDSK","EDSK2","SPSK","P2SK","EDPK","SPPK","P2PK","EDESK","SPESK","P2ESK","EDSIG","SPSIG","P2SIG","SIG","NET","NCE","B","O","LO","LLO","P","CO","ID","EXPR","TZ","prefixLength","__read","o","n","m","Symbol","iterator","i","call","r","ar","e","next","done","push","value","error","__spread","arguments","length","concat","bs58check","require","ValidationResult","isValidPrefix","validatePrefixedValue","prefixes","match","RegExp","join","exec","NO_PREFIX_MATCHED","prefixKey","decoded","decodeUnsafe","INVALID_CHECKSUM","slice","INVALID_LENGTH","VALID","implicitPrefix","contractPrefix","signaturePrefix","pkPrefix","validateAddress","validateChain","validateContractAddress","validateKeyHash","validateSignature","validatePublicKey","blake","bs58check$1","encodeExpr","blakeHash","blake2b","hex2buf","b58cencode","payloadAr","from","set","encode","buffer","b58cdecode","enc","prefixArg","decode","b58decode","payload","buf","prefixMap","tz1","toString","tz2","tz3","pref","hex","buf2hex","encodePubKey","substring","encodeKey","encodeKeyHash","map","h","parseInt","mergebuf","b1","b2","mic2arr","me2","s","ret","Object","prototype","hasOwnProperty","prim","args","key","val","Array","isArray","sc","keys","vals","string","int","byteArray","hexParts","forEach","byte","paddedHex"],"sources":["D:/work/projects/plenty/falcon-heavy-frontend/node_modules/@taquito/utils/dist/taquito-utils.es5.js"],"sourcesContent":["import { Buffer } from 'buffer';\n\nvar _a, _b;\r\nvar Prefix;\r\n(function (Prefix) {\r\n    Prefix[\"TZ1\"] = \"tz1\";\r\n    Prefix[\"TZ2\"] = \"tz2\";\r\n    Prefix[\"TZ3\"] = \"tz3\";\r\n    Prefix[\"KT\"] = \"KT\";\r\n    Prefix[\"KT1\"] = \"KT1\";\r\n    Prefix[\"EDSK2\"] = \"edsk2\";\r\n    Prefix[\"SPSK\"] = \"spsk\";\r\n    Prefix[\"P2SK\"] = \"p2sk\";\r\n    Prefix[\"EDPK\"] = \"edpk\";\r\n    Prefix[\"SPPK\"] = \"sppk\";\r\n    Prefix[\"P2PK\"] = \"p2pk\";\r\n    Prefix[\"EDESK\"] = \"edesk\";\r\n    Prefix[\"SPESK\"] = \"spesk\";\r\n    Prefix[\"P2ESK\"] = \"p2esk\";\r\n    Prefix[\"EDSK\"] = \"edsk\";\r\n    Prefix[\"EDSIG\"] = \"edsig\";\r\n    Prefix[\"SPSIG\"] = \"spsig\";\r\n    Prefix[\"P2SIG\"] = \"p2sig\";\r\n    Prefix[\"SIG\"] = \"sig\";\r\n    Prefix[\"NET\"] = \"Net\";\r\n    Prefix[\"NCE\"] = \"nce\";\r\n    Prefix[\"B\"] = \"b\";\r\n    Prefix[\"O\"] = \"o\";\r\n    Prefix[\"LO\"] = \"Lo\";\r\n    Prefix[\"LLO\"] = \"LLo\";\r\n    Prefix[\"P\"] = \"P\";\r\n    Prefix[\"CO\"] = \"Co\";\r\n    Prefix[\"ID\"] = \"id\";\r\n    Prefix[\"EXPR\"] = \"expr\";\r\n    Prefix[\"TZ\"] = \"TZ\";\r\n})(Prefix || (Prefix = {}));\r\nvar prefix = (_a = {},\r\n    _a[Prefix.TZ1] = new Uint8Array([6, 161, 159]),\r\n    _a[Prefix.TZ2] = new Uint8Array([6, 161, 161]),\r\n    _a[Prefix.TZ3] = new Uint8Array([6, 161, 164]),\r\n    _a[Prefix.KT] = new Uint8Array([2, 90, 121]),\r\n    _a[Prefix.KT1] = new Uint8Array([2, 90, 121]),\r\n    _a[Prefix.EDSK] = new Uint8Array([43, 246, 78, 7]),\r\n    _a[Prefix.EDSK2] = new Uint8Array([13, 15, 58, 7]),\r\n    _a[Prefix.SPSK] = new Uint8Array([17, 162, 224, 201]),\r\n    _a[Prefix.P2SK] = new Uint8Array([16, 81, 238, 189]),\r\n    _a[Prefix.EDPK] = new Uint8Array([13, 15, 37, 217]),\r\n    _a[Prefix.SPPK] = new Uint8Array([3, 254, 226, 86]),\r\n    _a[Prefix.P2PK] = new Uint8Array([3, 178, 139, 127]),\r\n    _a[Prefix.EDESK] = new Uint8Array([7, 90, 60, 179, 41]),\r\n    _a[Prefix.SPESK] = new Uint8Array([0x09, 0xed, 0xf1, 0xae, 0x96]),\r\n    _a[Prefix.P2ESK] = new Uint8Array([0x09, 0x30, 0x39, 0x73, 0xab]),\r\n    _a[Prefix.EDSIG] = new Uint8Array([9, 245, 205, 134, 18]),\r\n    _a[Prefix.SPSIG] = new Uint8Array([13, 115, 101, 19, 63]),\r\n    _a[Prefix.P2SIG] = new Uint8Array([54, 240, 44, 52]),\r\n    _a[Prefix.SIG] = new Uint8Array([4, 130, 43]),\r\n    _a[Prefix.NET] = new Uint8Array([87, 82, 0]),\r\n    _a[Prefix.NCE] = new Uint8Array([69, 220, 169]),\r\n    _a[Prefix.B] = new Uint8Array([1, 52]),\r\n    _a[Prefix.O] = new Uint8Array([5, 116]),\r\n    _a[Prefix.LO] = new Uint8Array([133, 233]),\r\n    _a[Prefix.LLO] = new Uint8Array([29, 159, 109]),\r\n    _a[Prefix.P] = new Uint8Array([2, 170]),\r\n    _a[Prefix.CO] = new Uint8Array([79, 179]),\r\n    _a[Prefix.ID] = new Uint8Array([153, 103]),\r\n    _a[Prefix.EXPR] = new Uint8Array([13, 44, 64, 27]),\r\n    // Legacy prefix\r\n    _a[Prefix.TZ] = new Uint8Array([2, 90, 121]),\r\n    _a);\r\nvar prefixLength = (_b = {},\r\n    _b[Prefix.TZ1] = 20,\r\n    _b[Prefix.TZ2] = 20,\r\n    _b[Prefix.TZ3] = 20,\r\n    _b[Prefix.KT] = 20,\r\n    _b[Prefix.KT1] = 20,\r\n    _b[Prefix.EDPK] = 32,\r\n    _b[Prefix.SPPK] = 33,\r\n    _b[Prefix.P2PK] = 33,\r\n    _b[Prefix.EDSIG] = 64,\r\n    _b[Prefix.SPSIG] = 64,\r\n    _b[Prefix.P2SIG] = 64,\r\n    _b[Prefix.SIG] = 64,\r\n    _b[Prefix.NET] = 4,\r\n    _b[Prefix.B] = 32,\r\n    _b[Prefix.P] = 32,\r\n    _b);\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\n\nvar bs58check = require('bs58check');\r\nvar ValidationResult;\r\n(function (ValidationResult) {\r\n    ValidationResult[ValidationResult[\"NO_PREFIX_MATCHED\"] = 0] = \"NO_PREFIX_MATCHED\";\r\n    ValidationResult[ValidationResult[\"INVALID_CHECKSUM\"] = 1] = \"INVALID_CHECKSUM\";\r\n    ValidationResult[ValidationResult[\"INVALID_LENGTH\"] = 2] = \"INVALID_LENGTH\";\r\n    ValidationResult[ValidationResult[\"VALID\"] = 3] = \"VALID\";\r\n})(ValidationResult || (ValidationResult = {}));\r\nfunction isValidPrefix(value) {\r\n    if (typeof value !== 'string') {\r\n        return false;\r\n    }\r\n    return value in prefix;\r\n}\r\n/**\r\n * @description This function is called by the validation functions ([[validateAddress]], [[validateChain]], [[validateContractAddress]], [[validateKeyHash]], [[validateSignature]], [[validatePublicKey]]).\r\n * Verify if the value has the right prefix or return `NO_PREFIX_MATCHED`,\r\n * decode the value using base58 and return `INVALID_CHECKSUM` if it fails,\r\n * check if the length of the value matches the prefix type or return `INVALID_LENGTH`.\r\n * If all checks pass, return `VALID`.\r\n *\r\n * @param value Value to validate\r\n * @param prefixes prefix the value should have\r\n */\r\nfunction validatePrefixedValue(value, prefixes) {\r\n    var match = new RegExp(\"^(\" + prefixes.join('|') + \")\").exec(value);\r\n    if (!match || match.length === 0) {\r\n        return ValidationResult.NO_PREFIX_MATCHED;\r\n    }\r\n    var prefixKey = match[0];\r\n    if (!isValidPrefix(prefixKey)) {\r\n        return ValidationResult.NO_PREFIX_MATCHED;\r\n    }\r\n    // decodeUnsafe return undefined if decoding fail\r\n    var decoded = bs58check.decodeUnsafe(value);\r\n    if (!decoded) {\r\n        return ValidationResult.INVALID_CHECKSUM;\r\n    }\r\n    decoded = decoded.slice(prefix[prefixKey].length);\r\n    if (decoded.length !== prefixLength[prefixKey]) {\r\n        return ValidationResult.INVALID_LENGTH;\r\n    }\r\n    return ValidationResult.VALID;\r\n}\r\nvar implicitPrefix = [Prefix.TZ1, Prefix.TZ2, Prefix.TZ3];\r\nvar contractPrefix = [Prefix.KT1];\r\nvar signaturePrefix = [Prefix.EDSIG, Prefix.P2SIG, Prefix.SPSIG, Prefix.SIG];\r\nvar pkPrefix = [Prefix.EDPK, Prefix.SPPK, Prefix.P2PK];\r\n/**\r\n * @description Used to check if an address or a contract address is valid.\r\n *\r\n * @returns\r\n * 0 (NO_PREFIX_MATCHED), 1 (INVALID_CHECKSUM), 2 (INVALID_LENGTH) or 3 (VALID).\r\n *\r\n * @example\r\n * ```\r\n * import { validateAddress } from '@taquito/utils';\r\n * const pkh = 'tz1L9r8mWmRPndRhuvMCWESLGSVeFzQ9NAWx'\r\n * const validation = validateAddress(pkh)\r\n * console.log(validation)\r\n * // This example return 3 which correspond to VALID\r\n * ```\r\n */\r\nfunction validateAddress(value) {\r\n    return validatePrefixedValue(value, __spread(implicitPrefix, contractPrefix));\r\n}\r\n/**\r\n * @description Used to check if a chain id is valid.\r\n *\r\n * @returns\r\n * 0 (NO_PREFIX_MATCHED), 1 (INVALID_CHECKSUM), 2 (INVALID_LENGTH) or 3 (VALID).\r\n *\r\n * @example\r\n * ```\r\n * import { validateChain } from '@taquito/utils';\r\n * const chainId = 'NetXdQprcVkpaWU'\r\n * const validation = validateChain(chainId)\r\n * console.log(validation)\r\n * // This example return 3 which correspond to VALID\r\n * ```\r\n */\r\nfunction validateChain(value) {\r\n    return validatePrefixedValue(value, [Prefix.NET]);\r\n}\r\n/**\r\n * @description Used to check if a contract address is valid.\r\n *\r\n * @returns\r\n * 0 (NO_PREFIX_MATCHED), 1 (INVALID_CHECKSUM), 2 (INVALID_LENGTH) or 3 (VALID).\r\n *\r\n * @example\r\n * ```\r\n * import { validateContractAddress } from '@taquito/utils';\r\n * const contractAddress = 'KT1JVErLYTgtY8uGGZ4mso2npTSxqVLDRVbC'\r\n * const validation = validateContractAddress(contractAddress)\r\n * console.log(validation)\r\n * // This example return 3 which correspond to VALID\r\n * ```\r\n */\r\nfunction validateContractAddress(value) {\r\n    return validatePrefixedValue(value, contractPrefix);\r\n}\r\n/**\r\n * @description Used to check if a key hash is valid.\r\n *\r\n * @returns\r\n * 0 (NO_PREFIX_MATCHED), 1 (INVALID_CHECKSUM), 2 (INVALID_LENGTH) or 3 (VALID).\r\n *\r\n * @example\r\n * ```\r\n * import { validateKeyHash } from '@taquito/utils';\r\n * const keyHashWithoutPrefix = '1L9r8mWmRPndRhuvMCWESLGSVeFzQ9NAWx'\r\n * const validation = validateKeyHash(keyHashWithoutPrefix)\r\n * console.log(validation)\r\n * // This example return 0 which correspond to NO_PREFIX_MATCHED\r\n * ```\r\n */\r\nfunction validateKeyHash(value) {\r\n    return validatePrefixedValue(value, implicitPrefix);\r\n}\r\n/**\r\n * @description Used to check if a signature is valid.\r\n *\r\n * @returns\r\n * 0 (NO_PREFIX_MATCHED), 1 (INVALID_CHECKSUM), 2 (INVALID_LENGTH) or 3 (VALID).\r\n *\r\n * @example\r\n * ```\r\n * import { validateSignature } from '@taquito/utils';\r\n * const signature = 'edsigtkpiSSschcaCt9pUVrpNPf7TTcgvgDEDD6NCEHMy8NNQJCGnMfLZzYoQj74yLjo9wx6MPVV29CvVzgi7qEcEUok3k7AuMg'\r\n * const validation = validateSignature(signature)\r\n * console.log(validation)\r\n * // This example return 3 which correspond to VALID\r\n * ```\r\n */\r\nfunction validateSignature(value) {\r\n    return validatePrefixedValue(value, signaturePrefix);\r\n}\r\n/**\r\n * @description Used to check if a signature is valid.\r\n *\r\n * @returns\r\n * 0 (NO_PREFIX_MATCHED), 1 (INVALID_CHECKSUM), 2 (INVALID_LENGTH) or 3 (VALID).\r\n *\r\n * @example\r\n * ```\r\n * import { validatePublicKey } from '@taquito/utils';\r\n * const publicKey = 'edsigtkpiSSschcaCt9pUVrpNPf7TTcgvgDEDD6NCEHMy8NNQJCGnMfLZzYoQj74yLjo9wx6MPVV29CvVzgi7qEcEUok3k7AuMg'\r\n * const validation = validatePublicKey(publicKey)\r\n * console.log(validation)\r\n * // This example return 3 which correspond to VALID\r\n * ```\r\n */\r\nfunction validatePublicKey(value) {\r\n    return validatePrefixedValue(value, pkPrefix);\r\n}\n\n/*\r\n * Some code in this file is originally from sotez and eztz\r\n * Copyright (c) 2018 Andrew Kishino\r\n * Copyright (c) 2017 Stephen Andrews\r\n */\r\nvar blake = require('blakejs');\r\nvar bs58check$1 = require('bs58check');\r\n/**\r\n *\r\n * @description Hash a string using the BLAKE2b algorithm, base58 encode the hash obtained and appends the prefix 'expr' to it\r\n *\r\n * @param value Value in hex\r\n */\r\nfunction encodeExpr(value) {\r\n    var blakeHash = blake.blake2b(hex2buf(value), null, 32);\r\n    return b58cencode(blakeHash, prefix['expr']);\r\n}\r\n/**\r\n *\r\n * @description Base58 encode a string or a Uint8Array and append a prefix to it\r\n *\r\n * @param value Value to base58 encode\r\n * @param prefix prefix to append to the encoded string\r\n */\r\nfunction b58cencode(value, prefix) {\r\n    var payloadAr = typeof value === 'string' ? Uint8Array.from(Buffer.from(value, 'hex')) : value;\r\n    var n = new Uint8Array(prefix.length + payloadAr.length);\r\n    n.set(prefix);\r\n    n.set(payloadAr, prefix.length);\r\n    return bs58check$1.encode(Buffer.from(n.buffer));\r\n}\r\n/**\r\n *\r\n * @description Base58 decode a string and remove the prefix from it\r\n *\r\n * @param value Value to base58 decode\r\n * @param prefix prefix to remove from the decoded string\r\n */\r\nvar b58cdecode = function (enc, prefixArg) {\r\n    return bs58check$1.decode(enc).slice(prefixArg.length);\r\n};\r\n/**\r\n *\r\n * @description Base58 decode a string with predefined prefix\r\n *\r\n * @param value Value to base58 decode\r\n */\r\nfunction b58decode(payload) {\r\n    var _a;\r\n    var buf = bs58check$1.decode(payload);\r\n    var prefixMap = (_a = {},\r\n        _a[prefix.tz1.toString()] = '0000',\r\n        _a[prefix.tz2.toString()] = '0001',\r\n        _a[prefix.tz3.toString()] = '0002',\r\n        _a);\r\n    var pref = prefixMap[new Uint8Array(buf.slice(0, 3)).toString()];\r\n    if (pref) {\r\n        // tz addresses\r\n        var hex = buf2hex(buf.slice(3));\r\n        return pref + hex;\r\n    }\r\n    else {\r\n        // other (kt addresses)\r\n        return '01' + buf2hex(buf.slice(3, 42)) + '00';\r\n    }\r\n}\r\n/**\r\n *\r\n * @description Base58 encode a public key using predefined prefix\r\n *\r\n * @param value Public Key to base58 encode\r\n */\r\nfunction encodePubKey(value) {\r\n    if (value.substring(0, 2) === '00') {\r\n        var pref = {\r\n            '0000': prefix.tz1,\r\n            '0001': prefix.tz2,\r\n            '0002': prefix.tz3,\r\n        };\r\n        return b58cencode(value.substring(4), pref[value.substring(0, 4)]);\r\n    }\r\n    return b58cencode(value.substring(2, 42), prefix.KT);\r\n}\r\n/**\r\n *\r\n * @description Base58 encode a key according to its prefix\r\n *\r\n * @param value Key to base58 encode\r\n */\r\nfunction encodeKey(value) {\r\n    if (value[0] === '0') {\r\n        var pref = {\r\n            '00': new Uint8Array([13, 15, 37, 217]),\r\n            '01': new Uint8Array([3, 254, 226, 86]),\r\n            '02': new Uint8Array([3, 178, 139, 127]),\r\n        };\r\n        return b58cencode(value.substring(2), pref[value.substring(0, 2)]);\r\n    }\r\n}\r\n/**\r\n *\r\n * @description Base58 encode a key hash according to its prefix\r\n *\r\n * @param value Key to base58 encode\r\n */\r\nfunction encodeKeyHash(value) {\r\n    if (value[0] === '0') {\r\n        var pref = {\r\n            '00': new Uint8Array([6, 161, 159]),\r\n            '01': new Uint8Array([6, 161, 161]),\r\n            '02': new Uint8Array([6, 161, 164]),\r\n        };\r\n        return b58cencode(value.substring(2), pref[value.substring(0, 2)]);\r\n    }\r\n}\r\n/**\r\n *\r\n * @description Convert an hex string to a Uint8Array\r\n *\r\n * @param hex Hex string to convert\r\n */\r\nvar hex2buf = function (hex) {\r\n    return new Uint8Array(hex.match(/[\\da-f]{2}/gi).map(function (h) { return parseInt(h, 16); }));\r\n};\r\n/**\r\n *\r\n * @description Merge 2 buffers together\r\n *\r\n * @param b1 First buffer\r\n * @param b2 Second buffer\r\n */\r\nvar mergebuf = function (b1, b2) {\r\n    var r = new Uint8Array(b1.length + b2.length);\r\n    r.set(b1);\r\n    r.set(b2, b1.length);\r\n    return r;\r\n};\r\n/**\r\n *\r\n * @description Flatten a michelson json representation to an array\r\n *\r\n * @param s michelson json\r\n */\r\nvar mic2arr = function me2(s) {\r\n    var ret = [];\r\n    if (Object.prototype.hasOwnProperty.call(s, 'prim')) {\r\n        if (s.prim === 'Pair') {\r\n            ret.push(me2(s.args[0]));\r\n            ret = ret.concat(me2(s.args[1]));\r\n        }\r\n        else if (s.prim === 'Elt') {\r\n            ret = {\r\n                key: me2(s.args[0]),\r\n                val: me2(s.args[1]),\r\n            };\r\n        }\r\n        else if (s.prim === 'True') {\r\n            ret = true;\r\n        }\r\n        else if (s.prim === 'False') {\r\n            ret = false;\r\n        }\r\n    }\r\n    else if (Array.isArray(s)) {\r\n        var sc = s.length;\r\n        for (var i = 0; i < sc; i++) {\r\n            var n = me2(s[i]);\r\n            if (typeof n.key !== 'undefined') {\r\n                if (Array.isArray(ret)) {\r\n                    ret = {\r\n                        keys: [],\r\n                        vals: [],\r\n                    };\r\n                }\r\n                ret.keys.push(n.key);\r\n                ret.vals.push(n.val);\r\n            }\r\n            else {\r\n                ret.push(n);\r\n            }\r\n        }\r\n    }\r\n    else if (Object.prototype.hasOwnProperty.call(s, 'string')) {\r\n        ret = s.string;\r\n    }\r\n    else if (Object.prototype.hasOwnProperty.call(s, 'int')) {\r\n        ret = parseInt(s.int, 10);\r\n    }\r\n    else {\r\n        ret = s;\r\n    }\r\n    return ret;\r\n};\r\n/**\r\n *\r\n * @description Convert a buffer to an hex string\r\n *\r\n * @param buffer Buffer to convert\r\n */\r\nvar buf2hex = function (buffer) {\r\n    var byteArray = new Uint8Array(buffer);\r\n    var hexParts = [];\r\n    byteArray.forEach(function (byte) {\r\n        var hex = byte.toString(16);\r\n        var paddedHex = (\"00\" + hex).slice(-2);\r\n        hexParts.push(paddedHex);\r\n    });\r\n    return hexParts.join('');\r\n};\n\nexport { Prefix, ValidationResult, b58cdecode, b58cencode, b58decode, buf2hex, encodeExpr, encodeKey, encodeKeyHash, encodePubKey, hex2buf, isValidPrefix, mergebuf, mic2arr, prefix, prefixLength, validateAddress, validateChain, validateContractAddress, validateKeyHash, validatePublicKey, validateSignature };\n//# sourceMappingURL=taquito-utils.es5.js.map\n"]},"metadata":{},"sourceType":"module"}