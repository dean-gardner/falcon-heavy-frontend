{"ast":null,"code":"/** PURE_IMPORTS_START tslib,_Subject,_OuterSubscriber,_util_subscribeToResult PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subject } from '../Subject';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nexport function windowWhen(closingSelector) {\n  return function windowWhenOperatorFunction(source) {\n    return source.lift(new WindowOperator(closingSelector));\n  };\n}\n\nvar WindowOperator = /*@__PURE__*/function () {\n  function WindowOperator(closingSelector) {\n    this.closingSelector = closingSelector;\n  }\n\n  WindowOperator.prototype.call = function (subscriber, source) {\n    return source.subscribe(new WindowSubscriber(subscriber, this.closingSelector));\n  };\n\n  return WindowOperator;\n}();\n\nvar WindowSubscriber = /*@__PURE__*/function (_super) {\n  tslib_1.__extends(WindowSubscriber, _super);\n\n  function WindowSubscriber(destination, closingSelector) {\n    var _this = _super.call(this, destination) || this;\n\n    _this.destination = destination;\n    _this.closingSelector = closingSelector;\n\n    _this.openWindow();\n\n    return _this;\n  }\n\n  WindowSubscriber.prototype.notifyNext = function (_outerValue, _innerValue, _outerIndex, _innerIndex, innerSub) {\n    this.openWindow(innerSub);\n  };\n\n  WindowSubscriber.prototype.notifyError = function (error) {\n    this._error(error);\n  };\n\n  WindowSubscriber.prototype.notifyComplete = function (innerSub) {\n    this.openWindow(innerSub);\n  };\n\n  WindowSubscriber.prototype._next = function (value) {\n    this.window.next(value);\n  };\n\n  WindowSubscriber.prototype._error = function (err) {\n    this.window.error(err);\n    this.destination.error(err);\n    this.unsubscribeClosingNotification();\n  };\n\n  WindowSubscriber.prototype._complete = function () {\n    this.window.complete();\n    this.destination.complete();\n    this.unsubscribeClosingNotification();\n  };\n\n  WindowSubscriber.prototype.unsubscribeClosingNotification = function () {\n    if (this.closingNotification) {\n      this.closingNotification.unsubscribe();\n    }\n  };\n\n  WindowSubscriber.prototype.openWindow = function (innerSub) {\n    if (innerSub === void 0) {\n      innerSub = null;\n    }\n\n    if (innerSub) {\n      this.remove(innerSub);\n      innerSub.unsubscribe();\n    }\n\n    var prevWindow = this.window;\n\n    if (prevWindow) {\n      prevWindow.complete();\n    }\n\n    var window = this.window = new Subject();\n    this.destination.next(window);\n    var closingNotifier;\n\n    try {\n      var closingSelector = this.closingSelector;\n      closingNotifier = closingSelector();\n    } catch (e) {\n      this.destination.error(e);\n      this.window.error(e);\n      return;\n    }\n\n    this.add(this.closingNotification = subscribeToResult(this, closingNotifier));\n  };\n\n  return WindowSubscriber;\n}(OuterSubscriber);","map":{"version":3,"mappings":"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","names":["tslib_1","Subject","OuterSubscriber","subscribeToResult","windowWhen","closingSelector","windowWhenOperatorFunction","source","lift","WindowOperator","prototype","call","subscriber","subscribe","WindowSubscriber","_super","__extends","destination","_this","openWindow","notifyNext","_outerValue","_innerValue","_outerIndex","_innerIndex","innerSub","notifyError","error","_error","notifyComplete","_next","value","window","next","err","unsubscribeClosingNotification","_complete","complete","closingNotification","unsubscribe","remove","prevWindow","closingNotifier","e","add"],"sources":["D:/work/projects/plenty/falcon-heavy-frontend/node_modules/rxjs/_esm5/internal/operators/windowWhen.js"],"sourcesContent":["/** PURE_IMPORTS_START tslib,_Subject,_OuterSubscriber,_util_subscribeToResult PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subject } from '../Subject';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nexport function windowWhen(closingSelector) {\n    return function windowWhenOperatorFunction(source) {\n        return source.lift(new WindowOperator(closingSelector));\n    };\n}\nvar WindowOperator = /*@__PURE__*/ (function () {\n    function WindowOperator(closingSelector) {\n        this.closingSelector = closingSelector;\n    }\n    WindowOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new WindowSubscriber(subscriber, this.closingSelector));\n    };\n    return WindowOperator;\n}());\nvar WindowSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(WindowSubscriber, _super);\n    function WindowSubscriber(destination, closingSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.destination = destination;\n        _this.closingSelector = closingSelector;\n        _this.openWindow();\n        return _this;\n    }\n    WindowSubscriber.prototype.notifyNext = function (_outerValue, _innerValue, _outerIndex, _innerIndex, innerSub) {\n        this.openWindow(innerSub);\n    };\n    WindowSubscriber.prototype.notifyError = function (error) {\n        this._error(error);\n    };\n    WindowSubscriber.prototype.notifyComplete = function (innerSub) {\n        this.openWindow(innerSub);\n    };\n    WindowSubscriber.prototype._next = function (value) {\n        this.window.next(value);\n    };\n    WindowSubscriber.prototype._error = function (err) {\n        this.window.error(err);\n        this.destination.error(err);\n        this.unsubscribeClosingNotification();\n    };\n    WindowSubscriber.prototype._complete = function () {\n        this.window.complete();\n        this.destination.complete();\n        this.unsubscribeClosingNotification();\n    };\n    WindowSubscriber.prototype.unsubscribeClosingNotification = function () {\n        if (this.closingNotification) {\n            this.closingNotification.unsubscribe();\n        }\n    };\n    WindowSubscriber.prototype.openWindow = function (innerSub) {\n        if (innerSub === void 0) {\n            innerSub = null;\n        }\n        if (innerSub) {\n            this.remove(innerSub);\n            innerSub.unsubscribe();\n        }\n        var prevWindow = this.window;\n        if (prevWindow) {\n            prevWindow.complete();\n        }\n        var window = this.window = new Subject();\n        this.destination.next(window);\n        var closingNotifier;\n        try {\n            var closingSelector = this.closingSelector;\n            closingNotifier = closingSelector();\n        }\n        catch (e) {\n            this.destination.error(e);\n            this.window.error(e);\n            return;\n        }\n        this.add(this.closingNotification = subscribeToResult(this, closingNotifier));\n    };\n    return WindowSubscriber;\n}(OuterSubscriber));\n//# sourceMappingURL=windowWhen.js.map\n"]},"metadata":{},"sourceType":"module"}