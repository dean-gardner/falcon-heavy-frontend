{"ast":null,"code":"/** PURE_IMPORTS_START tslib,_util_isFunction,_Observer,_Subscription,_internal_symbol_rxSubscriber,_config,_util_hostReportError PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { empty as emptyObserver } from './Observer';\nimport { Subscription } from './Subscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\n\nvar Subscriber = /*@__PURE__*/function (_super) {\n  tslib_1.__extends(Subscriber, _super);\n\n  function Subscriber(destinationOrNext, error, complete) {\n    var _this = _super.call(this) || this;\n\n    _this.syncErrorValue = null;\n    _this.syncErrorThrown = false;\n    _this.syncErrorThrowable = false;\n    _this.isStopped = false;\n\n    switch (arguments.length) {\n      case 0:\n        _this.destination = emptyObserver;\n        break;\n\n      case 1:\n        if (!destinationOrNext) {\n          _this.destination = emptyObserver;\n          break;\n        }\n\n        if (typeof destinationOrNext === 'object') {\n          if (destinationOrNext instanceof Subscriber) {\n            _this.syncErrorThrowable = destinationOrNext.syncErrorThrowable;\n            _this.destination = destinationOrNext;\n            destinationOrNext.add(_this);\n          } else {\n            _this.syncErrorThrowable = true;\n            _this.destination = new SafeSubscriber(_this, destinationOrNext);\n          }\n\n          break;\n        }\n\n      default:\n        _this.syncErrorThrowable = true;\n        _this.destination = new SafeSubscriber(_this, destinationOrNext, error, complete);\n        break;\n    }\n\n    return _this;\n  }\n\n  Subscriber.prototype[rxSubscriberSymbol] = function () {\n    return this;\n  };\n\n  Subscriber.create = function (next, error, complete) {\n    var subscriber = new Subscriber(next, error, complete);\n    subscriber.syncErrorThrowable = false;\n    return subscriber;\n  };\n\n  Subscriber.prototype.next = function (value) {\n    if (!this.isStopped) {\n      this._next(value);\n    }\n  };\n\n  Subscriber.prototype.error = function (err) {\n    if (!this.isStopped) {\n      this.isStopped = true;\n\n      this._error(err);\n    }\n  };\n\n  Subscriber.prototype.complete = function () {\n    if (!this.isStopped) {\n      this.isStopped = true;\n\n      this._complete();\n    }\n  };\n\n  Subscriber.prototype.unsubscribe = function () {\n    if (this.closed) {\n      return;\n    }\n\n    this.isStopped = true;\n\n    _super.prototype.unsubscribe.call(this);\n  };\n\n  Subscriber.prototype._next = function (value) {\n    this.destination.next(value);\n  };\n\n  Subscriber.prototype._error = function (err) {\n    this.destination.error(err);\n    this.unsubscribe();\n  };\n\n  Subscriber.prototype._complete = function () {\n    this.destination.complete();\n    this.unsubscribe();\n  };\n\n  Subscriber.prototype._unsubscribeAndRecycle = function () {\n    var _parentOrParents = this._parentOrParents;\n    this._parentOrParents = null;\n    this.unsubscribe();\n    this.closed = false;\n    this.isStopped = false;\n    this._parentOrParents = _parentOrParents;\n    return this;\n  };\n\n  return Subscriber;\n}(Subscription);\n\nexport { Subscriber };\n\nvar SafeSubscriber = /*@__PURE__*/function (_super) {\n  tslib_1.__extends(SafeSubscriber, _super);\n\n  function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {\n    var _this = _super.call(this) || this;\n\n    _this._parentSubscriber = _parentSubscriber;\n    var next;\n    var context = _this;\n\n    if (isFunction(observerOrNext)) {\n      next = observerOrNext;\n    } else if (observerOrNext) {\n      next = observerOrNext.next;\n      error = observerOrNext.error;\n      complete = observerOrNext.complete;\n\n      if (observerOrNext !== emptyObserver) {\n        context = Object.create(observerOrNext);\n\n        if (isFunction(context.unsubscribe)) {\n          _this.add(context.unsubscribe.bind(context));\n        }\n\n        context.unsubscribe = _this.unsubscribe.bind(_this);\n      }\n    }\n\n    _this._context = context;\n    _this._next = next;\n    _this._error = error;\n    _this._complete = complete;\n    return _this;\n  }\n\n  SafeSubscriber.prototype.next = function (value) {\n    if (!this.isStopped && this._next) {\n      var _parentSubscriber = this._parentSubscriber;\n\n      if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n        this.__tryOrUnsub(this._next, value);\n      } else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n        this.unsubscribe();\n      }\n    }\n  };\n\n  SafeSubscriber.prototype.error = function (err) {\n    if (!this.isStopped) {\n      var _parentSubscriber = this._parentSubscriber;\n      var useDeprecatedSynchronousErrorHandling = config.useDeprecatedSynchronousErrorHandling;\n\n      if (this._error) {\n        if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n          this.__tryOrUnsub(this._error, err);\n\n          this.unsubscribe();\n        } else {\n          this.__tryOrSetError(_parentSubscriber, this._error, err);\n\n          this.unsubscribe();\n        }\n      } else if (!_parentSubscriber.syncErrorThrowable) {\n        this.unsubscribe();\n\n        if (useDeprecatedSynchronousErrorHandling) {\n          throw err;\n        }\n\n        hostReportError(err);\n      } else {\n        if (useDeprecatedSynchronousErrorHandling) {\n          _parentSubscriber.syncErrorValue = err;\n          _parentSubscriber.syncErrorThrown = true;\n        } else {\n          hostReportError(err);\n        }\n\n        this.unsubscribe();\n      }\n    }\n  };\n\n  SafeSubscriber.prototype.complete = function () {\n    var _this = this;\n\n    if (!this.isStopped) {\n      var _parentSubscriber = this._parentSubscriber;\n\n      if (this._complete) {\n        var wrappedComplete = function () {\n          return _this._complete.call(_this._context);\n        };\n\n        if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n          this.__tryOrUnsub(wrappedComplete);\n\n          this.unsubscribe();\n        } else {\n          this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n\n          this.unsubscribe();\n        }\n      } else {\n        this.unsubscribe();\n      }\n    }\n  };\n\n  SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {\n    try {\n      fn.call(this._context, value);\n    } catch (err) {\n      this.unsubscribe();\n\n      if (config.useDeprecatedSynchronousErrorHandling) {\n        throw err;\n      } else {\n        hostReportError(err);\n      }\n    }\n  };\n\n  SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {\n    if (!config.useDeprecatedSynchronousErrorHandling) {\n      throw new Error('bad call');\n    }\n\n    try {\n      fn.call(this._context, value);\n    } catch (err) {\n      if (config.useDeprecatedSynchronousErrorHandling) {\n        parent.syncErrorValue = err;\n        parent.syncErrorThrown = true;\n        return true;\n      } else {\n        hostReportError(err);\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  SafeSubscriber.prototype._unsubscribe = function () {\n    var _parentSubscriber = this._parentSubscriber;\n    this._context = null;\n    this._parentSubscriber = null;\n\n    _parentSubscriber.unsubscribe();\n  };\n\n  return SafeSubscriber;\n}(Subscriber);\n\nexport { SafeSubscriber };","map":{"version":3,"mappings":"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","names":["tslib_1","isFunction","empty","emptyObserver","Subscription","rxSubscriber","rxSubscriberSymbol","config","hostReportError","Subscriber","_super","__extends","destinationOrNext","error","complete","_this","call","syncErrorValue","syncErrorThrown","syncErrorThrowable","isStopped","arguments","length","destination","add","SafeSubscriber","prototype","create","next","subscriber","value","_next","err","_error","_complete","unsubscribe","closed","_unsubscribeAndRecycle","_parentOrParents","_parentSubscriber","observerOrNext","context","Object","bind","_context","useDeprecatedSynchronousErrorHandling","__tryOrUnsub","__tryOrSetError","wrappedComplete","fn","parent","Error","_unsubscribe"],"sources":["D:/work/projects/plenty/falcon-heavy-frontend/node_modules/rxjs/_esm5/internal/Subscriber.js"],"sourcesContent":["/** PURE_IMPORTS_START tslib,_util_isFunction,_Observer,_Subscription,_internal_symbol_rxSubscriber,_config,_util_hostReportError PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { empty as emptyObserver } from './Observer';\nimport { Subscription } from './Subscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\nvar Subscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Subscriber, _super);\n    function Subscriber(destinationOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this.syncErrorValue = null;\n        _this.syncErrorThrown = false;\n        _this.syncErrorThrowable = false;\n        _this.isStopped = false;\n        switch (arguments.length) {\n            case 0:\n                _this.destination = emptyObserver;\n                break;\n            case 1:\n                if (!destinationOrNext) {\n                    _this.destination = emptyObserver;\n                    break;\n                }\n                if (typeof destinationOrNext === 'object') {\n                    if (destinationOrNext instanceof Subscriber) {\n                        _this.syncErrorThrowable = destinationOrNext.syncErrorThrowable;\n                        _this.destination = destinationOrNext;\n                        destinationOrNext.add(_this);\n                    }\n                    else {\n                        _this.syncErrorThrowable = true;\n                        _this.destination = new SafeSubscriber(_this, destinationOrNext);\n                    }\n                    break;\n                }\n            default:\n                _this.syncErrorThrowable = true;\n                _this.destination = new SafeSubscriber(_this, destinationOrNext, error, complete);\n                break;\n        }\n        return _this;\n    }\n    Subscriber.prototype[rxSubscriberSymbol] = function () { return this; };\n    Subscriber.create = function (next, error, complete) {\n        var subscriber = new Subscriber(next, error, complete);\n        subscriber.syncErrorThrowable = false;\n        return subscriber;\n    };\n    Subscriber.prototype.next = function (value) {\n        if (!this.isStopped) {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.isStopped = true;\n        _super.prototype.unsubscribe.call(this);\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        this.destination.error(err);\n        this.unsubscribe();\n    };\n    Subscriber.prototype._complete = function () {\n        this.destination.complete();\n        this.unsubscribe();\n    };\n    Subscriber.prototype._unsubscribeAndRecycle = function () {\n        var _parentOrParents = this._parentOrParents;\n        this._parentOrParents = null;\n        this.unsubscribe();\n        this.closed = false;\n        this.isStopped = false;\n        this._parentOrParents = _parentOrParents;\n        return this;\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar SafeSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SafeSubscriber, _super);\n    function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this._parentSubscriber = _parentSubscriber;\n        var next;\n        var context = _this;\n        if (isFunction(observerOrNext)) {\n            next = observerOrNext;\n        }\n        else if (observerOrNext) {\n            next = observerOrNext.next;\n            error = observerOrNext.error;\n            complete = observerOrNext.complete;\n            if (observerOrNext !== emptyObserver) {\n                context = Object.create(observerOrNext);\n                if (isFunction(context.unsubscribe)) {\n                    _this.add(context.unsubscribe.bind(context));\n                }\n                context.unsubscribe = _this.unsubscribe.bind(_this);\n            }\n        }\n        _this._context = context;\n        _this._next = next;\n        _this._error = error;\n        _this._complete = complete;\n        return _this;\n    }\n    SafeSubscriber.prototype.next = function (value) {\n        if (!this.isStopped && this._next) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                this.__tryOrUnsub(this._next, value);\n            }\n            else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            var useDeprecatedSynchronousErrorHandling = config.useDeprecatedSynchronousErrorHandling;\n            if (this._error) {\n                if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(this._error, err);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, this._error, err);\n                    this.unsubscribe();\n                }\n            }\n            else if (!_parentSubscriber.syncErrorThrowable) {\n                this.unsubscribe();\n                if (useDeprecatedSynchronousErrorHandling) {\n                    throw err;\n                }\n                hostReportError(err);\n            }\n            else {\n                if (useDeprecatedSynchronousErrorHandling) {\n                    _parentSubscriber.syncErrorValue = err;\n                    _parentSubscriber.syncErrorThrown = true;\n                }\n                else {\n                    hostReportError(err);\n                }\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.complete = function () {\n        var _this = this;\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (this._complete) {\n                var wrappedComplete = function () { return _this._complete.call(_this._context); };\n                if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(wrappedComplete);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n                    this.unsubscribe();\n                }\n            }\n            else {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            this.unsubscribe();\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                throw err;\n            }\n            else {\n                hostReportError(err);\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {\n        if (!config.useDeprecatedSynchronousErrorHandling) {\n            throw new Error('bad call');\n        }\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                parent.syncErrorValue = err;\n                parent.syncErrorThrown = true;\n                return true;\n            }\n            else {\n                hostReportError(err);\n                return true;\n            }\n        }\n        return false;\n    };\n    SafeSubscriber.prototype._unsubscribe = function () {\n        var _parentSubscriber = this._parentSubscriber;\n        this._context = null;\n        this._parentSubscriber = null;\n        _parentSubscriber.unsubscribe();\n    };\n    return SafeSubscriber;\n}(Subscriber));\nexport { SafeSubscriber };\n//# sourceMappingURL=Subscriber.js.map\n"]},"metadata":{},"sourceType":"module"}