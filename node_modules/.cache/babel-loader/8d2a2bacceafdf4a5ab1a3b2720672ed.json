{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useCallback } from \"react\";\nimport { TezosToolkit } from \"@taquito/taquito\";\nimport { NETWORK_ADDRESS, BOND_CONTRACT_ADDRESS } from '../../config/index';\nexport default function useBonds() {\n  _s();\n\n  const buyBond = useCallback(async () => {\n    alert('Waiting for back-end');\n    const Tezos = new TezosToolkit(NETWORK_ADDRESS);\n    const contract = await Tezos.wallet.at(BOND_CONTRACT_ADDRESS);\n    Tezos.contract.at(BOND_CONTRACT_ADDRESS).then(contract => {\n      return contract.methods.order().send();\n    });\n    const batch = await Tezos.wallet.batch().withContractCall(contract.methods.interact('defaul')).withContractCall(contract.methods.wait([['unit']]));\n    const batchOp = await batch.send();\n    console.log('Operation hash:', batchOp.hash);\n    await batchOp.confirmation();\n  }, []);\n  return {\n    buyBond\n  };\n}\n\n_s(useBonds, \"98EULqhvGbXdXwBWcxxQNfx+sLQ=\");","map":{"version":3,"sources":["D:/work/projects/plenty/falcon-heavy-frontend/src/components/Bonds/hooks.ts"],"names":["useCallback","TezosToolkit","NETWORK_ADDRESS","BOND_CONTRACT_ADDRESS","useBonds","buyBond","alert","Tezos","contract","wallet","at","then","methods","order","send","batch","withContractCall","interact","wait","batchOp","console","log","hash","confirmation"],"mappings":";;AAAA,SAASA,WAAT,QAAsC,OAAtC;AAGA,SAASC,YAAT,QAA6B,kBAA7B;AAEA,SAAQC,eAAR,EAAyBC,qBAAzB,QAAqD,oBAArD;AAGA,eAAe,SAASC,QAAT,GAAoB;AAAA;;AAEjC,QAAMC,OAAO,GAAGL,WAAW,CAAC,YAAY;AACpCM,IAAAA,KAAK,CAAC,sBAAD,CAAL;AAEA,UAAMC,KAAK,GAAG,IAAIN,YAAJ,CAAiBC,eAAjB,CAAd;AACA,UAAMM,QAAQ,GAAG,MAAMD,KAAK,CAACE,MAAN,CAAaC,EAAb,CAAgBP,qBAAhB,CAAvB;AACAI,IAAAA,KAAK,CAACC,QAAN,CAAeE,EAAf,CAAkBP,qBAAlB,EAAyCQ,IAAzC,CAA8CH,QAAQ,IAAI;AACxD,aAAOA,QAAQ,CAACI,OAAT,CAAiBC,KAAjB,GAAyBC,IAAzB,EAAP;AACD,KAFD;AAMA,UAAMC,KAAK,GAAG,MAAMR,KAAK,CAACE,MAAN,CAAaM,KAAb,GACjBC,gBADiB,CACAR,QAAQ,CAACI,OAAT,CAAiBK,QAAjB,CAA0B,QAA1B,CADA,EAEjBD,gBAFiB,CAEAR,QAAQ,CAACI,OAAT,CAAiBM,IAAjB,CAAsB,CAAC,CAAC,MAAD,CAAD,CAAtB,CAFA,CAApB;AAIA,UAAMC,OAAO,GAAG,MAAMJ,KAAK,CAACD,IAAN,EAAtB;AACAM,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BF,OAAO,CAACG,IAAvC;AACA,UAAMH,OAAO,CAACI,YAAR,EAAN;AACH,GAlB0B,EAkBxB,EAlBwB,CAA3B;AAsBA,SAAO;AAAElB,IAAAA;AAAF,GAAP;AACD;;GAzBuBD,Q","sourcesContent":["import { useCallback, useState } from \"react\";\nimport { BeaconWallet } from \"@taquito/beacon-wallet\";\n\nimport { TezosToolkit } from \"@taquito/taquito\";\nimport { NetworkType, PermissionScope } from \"@airgap/beacon-sdk\";\nimport {NETWORK_ADDRESS, BOND_CONTRACT_ADDRESS} from '../../config/index';\n\n\nexport default function useBonds() {\n\n  const buyBond = useCallback(async () => {\n      alert('Waiting for back-end');\n\n      const Tezos = new TezosToolkit(NETWORK_ADDRESS);\n      const contract = await Tezos.wallet.at(BOND_CONTRACT_ADDRESS);\n      Tezos.contract.at(BOND_CONTRACT_ADDRESS).then(contract => {\n        return contract.methods.order().send();\n      } );\n\n\n\n      const batch = await Tezos.wallet.batch()\n        .withContractCall(contract.methods.interact('defaul'))\n        .withContractCall(contract.methods.wait([['unit']]));\n\n      const batchOp = await batch.send();\n      console.log('Operation hash:', batchOp.hash);\n      await batchOp.confirmation();\n  }, []);\n\n\n\n  return { buyBond };\n}\n"]},"metadata":{},"sourceType":"module"}