{"ast":null,"code":"import { useEffect, useRef } from \"react\";\nimport { useLatestRef } from \"./use-latest-ref\";\n/**\n * Example, used in components like Dialogs and Popovers so they can close\n * when a user clicks outside them.\n */\n\nexport function useOutsideClick(props) {\n  var {\n    ref,\n    handler\n  } = props;\n  var savedHandler = useLatestRef(handler);\n  var stateRef = useRef({\n    isPointerDown: false,\n    ignoreEmulatedMouseEvents: false\n  });\n  var state = stateRef.current;\n  useEffect(() => {\n    var onPointerDown = e => {\n      if (isValidEvent(e, ref)) {\n        state.isPointerDown = true;\n      }\n    };\n\n    var onMouseUp = event => {\n      if (state.ignoreEmulatedMouseEvents) {\n        state.ignoreEmulatedMouseEvents = false;\n        return;\n      }\n\n      if (state.isPointerDown && handler && isValidEvent(event, ref)) {\n        state.isPointerDown = false;\n        savedHandler.current == null ? void 0 : savedHandler.current(event);\n      }\n    };\n\n    var onTouchEnd = event => {\n      state.ignoreEmulatedMouseEvents = true;\n\n      if (handler && state.isPointerDown && isValidEvent(event, ref)) {\n        state.isPointerDown = false;\n        savedHandler.current == null ? void 0 : savedHandler.current(event);\n      }\n    };\n\n    document.addEventListener(\"mousedown\", onPointerDown, true);\n    document.addEventListener(\"mouseup\", onMouseUp, true);\n    document.addEventListener(\"touchstart\", onPointerDown, true);\n    document.addEventListener(\"touchend\", onTouchEnd, true);\n    return () => {\n      document.removeEventListener(\"mousedown\", onPointerDown, true);\n      document.removeEventListener(\"mouseup\", onMouseUp, true);\n      document.removeEventListener(\"touchstart\", onPointerDown, true);\n      document.removeEventListener(\"touchend\", onTouchEnd, true);\n    };\n  }, [handler, ref, state.ignoreEmulatedMouseEvents, state.isPointerDown]);\n}\n\nfunction isValidEvent(event, ref) {\n  var target = event.target;\n  if (event.button > 0) return false; // if the event target is no longer in the document\n\n  if (target) {\n    var ownerDocument = target.ownerDocument;\n\n    if (!ownerDocument || !ownerDocument.body.contains(target)) {\n      return false;\n    }\n  }\n\n  return ref.current && !ref.current.contains(target);\n}","map":{"version":3,"mappings":"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","names":["useEffect","useRef","useLatestRef","useOutsideClick","props","ref","handler","savedHandler","stateRef","isPointerDown","ignoreEmulatedMouseEvents","state","current","onPointerDown","e","isValidEvent","onMouseUp","event","onTouchEnd","document","addEventListener","removeEventListener","target","button","ownerDocument","body","contains"],"sources":["D:/work/projects/plenty/falcon-heavy-frontend/node_modules/@chakra-ui/hooks/dist/esm/use-outside-click.js"],"sourcesContent":["import { useEffect, useRef } from \"react\";\nimport { useLatestRef } from \"./use-latest-ref\";\n\n/**\n * Example, used in components like Dialogs and Popovers so they can close\n * when a user clicks outside them.\n */\nexport function useOutsideClick(props) {\n  var {\n    ref,\n    handler\n  } = props;\n  var savedHandler = useLatestRef(handler);\n  var stateRef = useRef({\n    isPointerDown: false,\n    ignoreEmulatedMouseEvents: false\n  });\n  var state = stateRef.current;\n  useEffect(() => {\n    var onPointerDown = e => {\n      if (isValidEvent(e, ref)) {\n        state.isPointerDown = true;\n      }\n    };\n\n    var onMouseUp = event => {\n      if (state.ignoreEmulatedMouseEvents) {\n        state.ignoreEmulatedMouseEvents = false;\n        return;\n      }\n\n      if (state.isPointerDown && handler && isValidEvent(event, ref)) {\n        state.isPointerDown = false;\n        savedHandler.current == null ? void 0 : savedHandler.current(event);\n      }\n    };\n\n    var onTouchEnd = event => {\n      state.ignoreEmulatedMouseEvents = true;\n\n      if (handler && state.isPointerDown && isValidEvent(event, ref)) {\n        state.isPointerDown = false;\n        savedHandler.current == null ? void 0 : savedHandler.current(event);\n      }\n    };\n\n    document.addEventListener(\"mousedown\", onPointerDown, true);\n    document.addEventListener(\"mouseup\", onMouseUp, true);\n    document.addEventListener(\"touchstart\", onPointerDown, true);\n    document.addEventListener(\"touchend\", onTouchEnd, true);\n    return () => {\n      document.removeEventListener(\"mousedown\", onPointerDown, true);\n      document.removeEventListener(\"mouseup\", onMouseUp, true);\n      document.removeEventListener(\"touchstart\", onPointerDown, true);\n      document.removeEventListener(\"touchend\", onTouchEnd, true);\n    };\n  }, [handler, ref, state.ignoreEmulatedMouseEvents, state.isPointerDown]);\n}\n\nfunction isValidEvent(event, ref) {\n  var target = event.target;\n  if (event.button > 0) return false; // if the event target is no longer in the document\n\n  if (target) {\n    var ownerDocument = target.ownerDocument;\n\n    if (!ownerDocument || !ownerDocument.body.contains(target)) {\n      return false;\n    }\n  }\n\n  return ref.current && !ref.current.contains(target);\n}\n//# sourceMappingURL=use-outside-click.js.map"]},"metadata":{},"sourceType":"module"}