{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useCallback, useState } from \"react\";\nimport { BeaconWallet } from \"@taquito/beacon-wallet\";\nimport { TezosToolkit } from \"@taquito/taquito\";\nimport { PermissionScope } from \"@airgap/beacon-sdk\";\nimport { NETWORK_ADDRESS } from '../config/index';\nconst options = {\n  name: \"Plenty Bonds Marketplace: Falcon Heavy\" // iconUrl: \"https://tezostaquito.io/img/favicon.png\",\n  // eventHandlers: {\n  //   PERMISSION_REQUEST_SUCCESS: {\n  //     handler: async (data: any) => {\n  //       console.log(\"permission data\", data);\n  //     },\n  //   },\n  // },\n\n};\n\nclass LambdaViewSigner {\n  async publicKeyHash() {\n    return \"tz1fVQangAfb9J1hRRMP2bSB6LvASD6KpY8A\";\n  }\n\n  async publicKey() {\n    return \"edpkvWbk81uh1DEvdWKR4g1bjyTGhdu1mDvznPUFE2zDwNsLXrEb9K\";\n  }\n\n  async secretKey() {\n    throw new Error(\"Secret key cannot be exposed\");\n  }\n\n  async sign() {\n    throw new Error(\"Cannot sign\");\n  }\n\n}\n\nconst Tezos = new TezosToolkit(NETWORK_ADDRESS);\nconst wallet = new BeaconWallet(options);\nTezos.setWalletProvider(wallet); //Tezos.setSignerProvider(new LambdaViewSigner());\n\nexport default function useBeacon() {\n  _s();\n\n  const [pkh, setUserPkh] = useState();\n  const connect = useCallback(async () => {\n    await wallet.requestPermissions({\n      scopes: [PermissionScope.OPERATION_REQUEST, PermissionScope.SIGN, PermissionScope.THRESHOLD]\n    }); // {\n    //   network: { type: NetworkType.DELPHINET },\n    //   scopes: [\n    //     PermissionScope.OPERATION_REQUEST,\n    //     PermissionScope.SIGN,\n    //     PermissionScope.THRESHOLD,\n    //   ],\n    // }\n\n    const _pkh = await wallet.getPKH();\n\n    setUserPkh(_pkh);\n  }, []);\n  const disconnect = useCallback(async () => {\n    await wallet.client.removeAllAccounts();\n  }, []);\n  return {\n    connect,\n    disconnect,\n    pkh,\n    Tezos\n  };\n}\n\n_s(useBeacon, \"m4hWikMIjJJalssKiHo2i+cuem4=\");","map":{"version":3,"sources":["D:/work/projects/plenty/falcon-heavy-frontend/src/hooks/useBeacon.ts"],"names":["useCallback","useState","BeaconWallet","TezosToolkit","PermissionScope","NETWORK_ADDRESS","options","name","LambdaViewSigner","publicKeyHash","publicKey","secretKey","Error","sign","Tezos","wallet","setWalletProvider","useBeacon","pkh","setUserPkh","connect","requestPermissions","scopes","OPERATION_REQUEST","SIGN","THRESHOLD","_pkh","getPKH","disconnect","client","removeAllAccounts"],"mappings":";;AAAA,SAASA,WAAT,EAAsBC,QAAtB,QAAsC,OAAtC;AACA,SAASC,YAAT,QAA6B,wBAA7B;AAEA,SAASC,YAAT,QAA6B,kBAA7B;AACA,SAAsBC,eAAtB,QAA6C,oBAA7C;AAEA,SAAQC,eAAR,QAAmE,iBAAnE;AAEA,MAAMC,OAAO,GAAG;AACdC,EAAAA,IAAI,EAAE,wCADQ,CAEd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AATc,CAAhB;;AAYA,MAAMC,gBAAN,CAAuB;AACF,QAAbC,aAAa,GAAG;AACpB,WAAO,sCAAP;AACD;;AAEc,QAATC,SAAS,GAAG;AAChB,WAAO,wDAAP;AACD;;AAEc,QAATC,SAAS,GAAoB;AACjC,UAAM,IAAIC,KAAJ,CAAU,8BAAV,CAAN;AACD;;AAES,QAAJC,IAAI,GAKP;AACD,UAAM,IAAID,KAAJ,CAAU,aAAV,CAAN;AACD;;AApBoB;;AAuBvB,MAAME,KAAK,GAAG,IAAIX,YAAJ,CAAiBE,eAAjB,CAAd;AAEA,MAAMU,MAAM,GAAG,IAAIb,YAAJ,CAAiBI,OAAjB,CAAf;AAGAQ,KAAK,CAACE,iBAAN,CAAwBD,MAAxB,E,CACA;;AAEA,eAAe,SAASE,SAAT,GAAqB;AAAA;;AAClC,QAAM,CAACC,GAAD,EAAMC,UAAN,IAAoBlB,QAAQ,EAAlC;AAEA,QAAMmB,OAAO,GAAGpB,WAAW,CAAC,YAAY;AACtC,UAAMe,MAAM,CAACM,kBAAP,CAA0B;AAC9BC,MAAAA,MAAM,EAAE,CACDlB,eAAe,CAACmB,iBADf,EAEDnB,eAAe,CAACoB,IAFf,EAGDpB,eAAe,CAACqB,SAHf;AADsB,KAA1B,CAAN,CADsC,CAStC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,UAAMC,IAAI,GAAG,MAAMX,MAAM,CAACY,MAAP,EAAnB;;AACAR,IAAAA,UAAU,CAACO,IAAD,CAAV;AACD,GApB0B,EAoBxB,EApBwB,CAA3B;AAsBD,QAAME,UAAU,GAAG5B,WAAW,CAAC,YAAW;AACvC,UAAMe,MAAM,CAACc,MAAP,CAAcC,iBAAd,EAAN;AACF,GAF6B,EAE3B,EAF2B,CAA9B;AAKC,SAAO;AAAEV,IAAAA,OAAF;AAAWQ,IAAAA,UAAX;AAAuBV,IAAAA,GAAvB;AAA4BJ,IAAAA;AAA5B,GAAP;AACD;;GA/BuBG,S","sourcesContent":["import { useCallback, useState } from \"react\";\r\nimport { BeaconWallet } from \"@taquito/beacon-wallet\";\r\n\r\nimport { TezosToolkit } from \"@taquito/taquito\";\r\nimport { NetworkType, PermissionScope } from \"@airgap/beacon-sdk\";\r\n\r\nimport {NETWORK_ADDRESS, BOND_CONTRACT_ADDRESS, NETWORK_TYPE} from '../config/index';\r\n\r\nconst options = {\r\n  name: \"Plenty Bonds Marketplace: Falcon Heavy\",\r\n  // iconUrl: \"https://tezostaquito.io/img/favicon.png\",\r\n  // eventHandlers: {\r\n  //   PERMISSION_REQUEST_SUCCESS: {\r\n  //     handler: async (data: any) => {\r\n  //       console.log(\"permission data\", data);\r\n  //     },\r\n  //   },\r\n  // },\r\n};\r\n\r\nclass LambdaViewSigner {\r\n  async publicKeyHash() {\r\n    return \"tz1fVQangAfb9J1hRRMP2bSB6LvASD6KpY8A\";\r\n  }\r\n\r\n  async publicKey() {\r\n    return \"edpkvWbk81uh1DEvdWKR4g1bjyTGhdu1mDvznPUFE2zDwNsLXrEb9K\";\r\n  }\r\n\r\n  async secretKey(): Promise<string> {\r\n    throw new Error(\"Secret key cannot be exposed\");\r\n  }\r\n\r\n  async sign(): Promise<{\r\n    bytes: string;\r\n    sig: string;\r\n    prefixSig: string;\r\n    sbytes: string;\r\n  }> {\r\n    throw new Error(\"Cannot sign\");\r\n  }\r\n}\r\n\r\nconst Tezos = new TezosToolkit(NETWORK_ADDRESS);\r\n\r\nconst wallet = new BeaconWallet(options);\r\n\r\n\r\nTezos.setWalletProvider(wallet);\r\n//Tezos.setSignerProvider(new LambdaViewSigner());\r\n\r\nexport default function useBeacon() {\r\n  const [pkh, setUserPkh] = useState<string>();\r\n\r\n  const connect = useCallback(async () => {\r\n    await wallet.requestPermissions({\r\n      scopes: [\r\n             PermissionScope.OPERATION_REQUEST,\r\n             PermissionScope.SIGN,\r\n             PermissionScope.THRESHOLD,\r\n           ]\r\n    });\r\n\r\n    // {\r\n    //   network: { type: NetworkType.DELPHINET },\r\n    //   scopes: [\r\n    //     PermissionScope.OPERATION_REQUEST,\r\n    //     PermissionScope.SIGN,\r\n    //     PermissionScope.THRESHOLD,\r\n    //   ],\r\n    // }\r\n\r\n    const _pkh = await wallet.getPKH();\r\n    setUserPkh(_pkh);\r\n  }, []);\r\n\r\n const disconnect = useCallback(async() => {\r\n    await wallet.client.removeAllAccounts();\r\n }, []);\r\n\r\n\r\n  return { connect, disconnect, pkh, Tezos };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}