{"ast":null,"code":"/** PURE_IMPORTS_START tslib,_scheduler_async,_util_isDate,_innerSubscribe PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { async } from '../scheduler/async';\nimport { isDate } from '../util/isDate';\nimport { SimpleOuterSubscriber, innerSubscribe, SimpleInnerSubscriber } from '../innerSubscribe';\nexport function timeoutWith(due, withObservable, scheduler) {\n  if (scheduler === void 0) {\n    scheduler = async;\n  }\n\n  return function (source) {\n    var absoluteTimeout = isDate(due);\n    var waitFor = absoluteTimeout ? +due - scheduler.now() : Math.abs(due);\n    return source.lift(new TimeoutWithOperator(waitFor, absoluteTimeout, withObservable, scheduler));\n  };\n}\n\nvar TimeoutWithOperator = /*@__PURE__*/function () {\n  function TimeoutWithOperator(waitFor, absoluteTimeout, withObservable, scheduler) {\n    this.waitFor = waitFor;\n    this.absoluteTimeout = absoluteTimeout;\n    this.withObservable = withObservable;\n    this.scheduler = scheduler;\n  }\n\n  TimeoutWithOperator.prototype.call = function (subscriber, source) {\n    return source.subscribe(new TimeoutWithSubscriber(subscriber, this.absoluteTimeout, this.waitFor, this.withObservable, this.scheduler));\n  };\n\n  return TimeoutWithOperator;\n}();\n\nvar TimeoutWithSubscriber = /*@__PURE__*/function (_super) {\n  tslib_1.__extends(TimeoutWithSubscriber, _super);\n\n  function TimeoutWithSubscriber(destination, absoluteTimeout, waitFor, withObservable, scheduler) {\n    var _this = _super.call(this, destination) || this;\n\n    _this.absoluteTimeout = absoluteTimeout;\n    _this.waitFor = waitFor;\n    _this.withObservable = withObservable;\n    _this.scheduler = scheduler;\n\n    _this.scheduleTimeout();\n\n    return _this;\n  }\n\n  TimeoutWithSubscriber.dispatchTimeout = function (subscriber) {\n    var withObservable = subscriber.withObservable;\n\n    subscriber._unsubscribeAndRecycle();\n\n    subscriber.add(innerSubscribe(withObservable, new SimpleInnerSubscriber(subscriber)));\n  };\n\n  TimeoutWithSubscriber.prototype.scheduleTimeout = function () {\n    var action = this.action;\n\n    if (action) {\n      this.action = action.schedule(this, this.waitFor);\n    } else {\n      this.add(this.action = this.scheduler.schedule(TimeoutWithSubscriber.dispatchTimeout, this.waitFor, this));\n    }\n  };\n\n  TimeoutWithSubscriber.prototype._next = function (value) {\n    if (!this.absoluteTimeout) {\n      this.scheduleTimeout();\n    }\n\n    _super.prototype._next.call(this, value);\n  };\n\n  TimeoutWithSubscriber.prototype._unsubscribe = function () {\n    this.action = undefined;\n    this.scheduler = null;\n    this.withObservable = null;\n  };\n\n  return TimeoutWithSubscriber;\n}(SimpleOuterSubscriber);","map":{"version":3,"mappings":"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","names":["tslib_1","async","isDate","SimpleOuterSubscriber","innerSubscribe","SimpleInnerSubscriber","timeoutWith","due","withObservable","scheduler","source","absoluteTimeout","waitFor","now","Math","abs","lift","TimeoutWithOperator","prototype","call","subscriber","subscribe","TimeoutWithSubscriber","_super","__extends","destination","_this","scheduleTimeout","dispatchTimeout","_unsubscribeAndRecycle","add","action","schedule","_next","value","_unsubscribe","undefined"],"sources":["D:/work/projects/plenty/falcon-heavy-frontend/node_modules/rxjs/_esm5/internal/operators/timeoutWith.js"],"sourcesContent":["/** PURE_IMPORTS_START tslib,_scheduler_async,_util_isDate,_innerSubscribe PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { async } from '../scheduler/async';\nimport { isDate } from '../util/isDate';\nimport { SimpleOuterSubscriber, innerSubscribe, SimpleInnerSubscriber } from '../innerSubscribe';\nexport function timeoutWith(due, withObservable, scheduler) {\n    if (scheduler === void 0) {\n        scheduler = async;\n    }\n    return function (source) {\n        var absoluteTimeout = isDate(due);\n        var waitFor = absoluteTimeout ? (+due - scheduler.now()) : Math.abs(due);\n        return source.lift(new TimeoutWithOperator(waitFor, absoluteTimeout, withObservable, scheduler));\n    };\n}\nvar TimeoutWithOperator = /*@__PURE__*/ (function () {\n    function TimeoutWithOperator(waitFor, absoluteTimeout, withObservable, scheduler) {\n        this.waitFor = waitFor;\n        this.absoluteTimeout = absoluteTimeout;\n        this.withObservable = withObservable;\n        this.scheduler = scheduler;\n    }\n    TimeoutWithOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new TimeoutWithSubscriber(subscriber, this.absoluteTimeout, this.waitFor, this.withObservable, this.scheduler));\n    };\n    return TimeoutWithOperator;\n}());\nvar TimeoutWithSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(TimeoutWithSubscriber, _super);\n    function TimeoutWithSubscriber(destination, absoluteTimeout, waitFor, withObservable, scheduler) {\n        var _this = _super.call(this, destination) || this;\n        _this.absoluteTimeout = absoluteTimeout;\n        _this.waitFor = waitFor;\n        _this.withObservable = withObservable;\n        _this.scheduler = scheduler;\n        _this.scheduleTimeout();\n        return _this;\n    }\n    TimeoutWithSubscriber.dispatchTimeout = function (subscriber) {\n        var withObservable = subscriber.withObservable;\n        subscriber._unsubscribeAndRecycle();\n        subscriber.add(innerSubscribe(withObservable, new SimpleInnerSubscriber(subscriber)));\n    };\n    TimeoutWithSubscriber.prototype.scheduleTimeout = function () {\n        var action = this.action;\n        if (action) {\n            this.action = action.schedule(this, this.waitFor);\n        }\n        else {\n            this.add(this.action = this.scheduler.schedule(TimeoutWithSubscriber.dispatchTimeout, this.waitFor, this));\n        }\n    };\n    TimeoutWithSubscriber.prototype._next = function (value) {\n        if (!this.absoluteTimeout) {\n            this.scheduleTimeout();\n        }\n        _super.prototype._next.call(this, value);\n    };\n    TimeoutWithSubscriber.prototype._unsubscribe = function () {\n        this.action = undefined;\n        this.scheduler = null;\n        this.withObservable = null;\n    };\n    return TimeoutWithSubscriber;\n}(SimpleOuterSubscriber));\n//# sourceMappingURL=timeoutWith.js.map\n"]},"metadata":{},"sourceType":"module"}